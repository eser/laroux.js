{"version":3,"sources":["temp/base/laroux.js","temp/base/laroux.ajax.js","laroux-base.js","temp/base/laroux.date.js","temp/base/laroux.events.js","temp/base/laroux.helpers.js","temp/base/laroux.stack.js","temp/base/laroux.timers.js","temp/base/laroux.triggers.js","temp/base/laroux.vars.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","global","scope","laroux","events","helpers","ajax","timers","triggers","vars","date","stack","extend","Array","prototype","unshift","arguments","extendObject","apply","this","each","map","index","aeach","amap","aindex","$l","window","self","./laroux.ajax.js","./laroux.date.js","./laroux.events.js","./laroux.helpers.js","./laroux.stack.js","./laroux.timers.js","./laroux.triggers.js","./laroux.vars.js",2,"laroux_events","laroux_helpers","laroux_ajax","corsDefault","wrappers","registry","laroux.js","data","isSuccess","console","log","errorMessage","obj","format","JSON","parse","object","eval","set","name","fnc","xDomainObject","xmlHttpRequestObject","xDomainRequestObject","xhr","crossDomain","XMLHttpRequest","XDomainRequest","xhrResp","options","wrapperFunction","getResponseHeader","response","undefined","datatype","responseText","responseXML","wrapperFunc","makeRequest","cors","url","timer","timeout","setTimeout","abort","timeoutFn","onreadystatechange","readyState","clearTimeout","status","res","error","statusText","invoke","success","complete","progress","getdata","constructor","Object","queryString","buildQueryString","indexOf","jsonp","open","type","xhrFields","hasOwnProperty","headers","wrapper","j","setRequestHeader","postdata","send","postdatatype","stringify","buildFormData","get","path","values","successfnc","errorfnc","getJson","getJsonP","method","getScript","post","postJson","Content-Type",3,"laroux_date","shortDateFormat","longDateFormat","timeFormat","monthsShort","monthsLong","strings","now","later","ago","seconds","aminute","minutes","ahour","hours","aday","days","aweek","weeks","amonth","months","ayear","years","parseEpoch","timespan","limitWithWeeks","Math","ceil","getCustomDateString","Date","replace","match","getFullYear","getYear","getMonth","substr","getDate","hour1","getHours","hour2","getMinutes","getSeconds","getDateDiffString","getTime","absTimespan","abs","past","timespanstring","getShortDateString","includeTime","getLongDateString",4,"delegates","add","event","push","args","item",5,"uniqueId","getUniqueId","rfc3986","uri","regEx","encodeURIComponent","toString","FormData","append","shift","replaceAll","text","dictionary","re","RegExp","keys","join","camelCase","value","flag","output","currChar","charAt","toUpperCase","antiCamelCase","toLowerCase","quoteAttr","spliceString","count","slice","random","min","max","floor","find","iterator","context","result","some","list","target","arr","testOwnProperties","dontSkipReturns","results","start","column","key","shuffle","shuffled","rand","merge","tmp","isArray","concat","attr","duplicate","toArray","items","getAsArray","NodeList","getLength","getKeysRecursive","delimiter","prefix","getElement","defaultValue","rest","pos","substring",6,"laroux_stack","depth","top","_data","_depth","_top","defineProperty","configurable","newValue","oldValue","onupdate","setRange","valueKey","getRange","exists","remove","clear",7,"laroux_timers","next","id","targetKey","currentItem","splice","ontick","removeKeys","state","reset","item2",8,"laroux_triggers","condition","conditions","ontrigger","triggerName","eventIdx","conditionKey","conditionObj",9,"laroux_vars","cookiePath","getCookie","document","cookie","decodeURIComponent","split","setCookie","expires","expireValue","toGMTString","removeCookie","getLocal","localStorage","setLocal","removeLocal","getSession","sessionStorage","setSession","removeSession"],"mappings":"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","file":"laroux-base.min.js","sourcesContent":["module.exports = (function (scope) {\n    'use strict';\n\n    // core\n    var laroux;\n    laroux = function () {\n    };\n    // modules\n    laroux.events = require('./laroux.events.js');\n    laroux.helpers = require('./laroux.helpers.js');\n    laroux.ajax = require('./laroux.ajax.js');\n    laroux.timers = require('./laroux.timers.js');\n    laroux.triggers = require('./laroux.triggers.js');\n    laroux.vars = require('./laroux.vars.js');\n    laroux.date = require('./laroux.date.js');\n    laroux.stack = require('./laroux.stack.js');\n\n    laroux.extend = function () {\n        Array.prototype.unshift.call(arguments, laroux);\n        laroux.helpers.extendObject.apply(this, arguments);\n    };\n\n    laroux.extendObject = laroux.helpers.extendObject;\n    laroux.each = laroux.helpers.each;\n    laroux.map = laroux.helpers.map;\n    laroux.index = laroux.helpers.index;\n    laroux.aeach = laroux.helpers.aeach;\n    laroux.amap = laroux.helpers.amap;\n    laroux.aindex = laroux.helpers.aindex;\n\n    if (!('$l' in scope)) {\n        scope.$l = laroux;\n    }\n\n    return laroux;\n\n}(typeof window !== 'undefined' ? window : global));\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_events = require('./laroux.events.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // ajax - partially taken from 'jquery in parts' project\n    //        can be found at: https://github.com/mythz/jquip/\n    var laroux_ajax = {\n        corsDefault: false,\n\n        wrappers: {\n            registry: {\n                'laroux.js': function (data) {\n                    if (!data.isSuccess) {\n                        console.log('Error: ' + data.errorMessage);\n                        return;\n                    }\n\n                    var obj;\n\n                    if (data.format === 'json') {\n                        obj = JSON.parse(data.object);\n                    } else if (data.format === 'script') {\n                        /*jshint evil:true */\n                        /*jslint evil:true */\n                        obj = eval(data.object);\n                    } else { // if (data.format == 'xml') {\n                        obj = data.object;\n                    }\n\n                    return obj;\n                }\n            },\n\n            set: function (name, fnc) {\n                laroux_ajax.wrappers.registry[name] = fnc;\n            }\n        },\n\n        xDomainObject: false,\n        xmlHttpRequestObject: null,\n        xDomainRequestObject: null,\n        xhr: function (crossDomain) {\n            if (laroux_ajax.xmlHttpRequestObject === null) {\n                laroux_ajax.xmlHttpRequestObject = new XMLHttpRequest();\n            }\n\n            if (crossDomain) {\n                if (!('withCredentials' in laroux_ajax.xmlHttpRequestObject) && typeof XDomainRequest !== 'undefined') {\n                    laroux_ajax.xDomainObject = true;\n\n                    if (laroux_ajax.xDomainRequestObject === null) {\n                        laroux_ajax.xDomainRequestObject = new XDomainRequest();\n                    }\n\n                    return laroux_ajax.xDomainRequestObject;\n                }\n            } else {\n                laroux_ajax.xDomainObject = false;\n            }\n\n            return laroux_ajax.xmlHttpRequestObject;\n        },\n\n        xhrResp: function (xhr, options) {\n            var wrapperFunction = xhr.getResponseHeader('X-Response-Wrapper-Function'),\n                response;\n\n            if (options.datatype === undefined) {\n                response = xhr.responseText;\n            } else if (options.datatype === 'json') {\n                response = JSON.parse(xhr.responseText);\n            } else if (options.datatype === 'script') {\n                /*jshint evil:true */\n                /*jslint evil:true */\n                response = eval(xhr.responseText);\n            } else if (options.datatype === 'xml') {\n                response = xhr.responseXML;\n            } else {\n                response = xhr.responseText;\n            }\n\n            if (wrapperFunction && (wrapperFunction in laroux_ajax.wrappers.registry)) {\n                response = laroux_ajax.wrappers.registry[wrapperFunction](response);\n            }\n\n            return {\n                response: response,\n                wrapperFunc: wrapperFunction\n            };\n        },\n\n        makeRequest: function (options) {\n            var cors = options.cors || laroux_ajax.corsDefault,\n                xhr = laroux_ajax.xhr(cors),\n                url = options.url,\n                timer = null,\n                n = 0;\n\n            if (options.timeout !== undefined) {\n                timer = setTimeout(\n                    function () {\n                        xhr.abort();\n                        if (options.timeoutFn !== undefined) {\n                            options.timeoutFn(options.url);\n                        }\n                    },\n                    options.timeout\n                );\n            }\n\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                    if (timer !== null) {\n                        clearTimeout(timer);\n                    }\n\n                    if (xhr.status < 300) {\n                        var res = null,\n                            isSuccess = true;\n\n                        try {\n                            res = laroux_ajax.xhrResp(xhr, options);\n                        } catch (e) {\n                            if (options.error !== undefined) {\n                                options.error(xhr, xhr.status, xhr.statusText);\n                            }\n\n                            laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                            isSuccess = false;\n                        }\n\n                        if (isSuccess) {\n                            if (options.success !== undefined && res !== null) {\n                                options.success(res.response, res.wrapperFunc);\n                            }\n\n                            laroux_events.invoke('ajaxSuccess', [xhr, res.response, res.wrapperFunc, options]);\n                        }\n                    } else {\n                        if (options.error !== undefined) {\n                            options.error(xhr, xhr.status, xhr.statusText);\n                        }\n\n                        laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                    }\n\n                    if (options.complete !== undefined) {\n                        options.complete(xhr, xhr.statusText);\n                    }\n\n                    laroux_events.invoke('ajaxComplete', [xhr, xhr.statusText, options]);\n                } else if (options.progress !== undefined) {\n                    /*jslint plusplus: true */\n                    options.progress(++n);\n                }\n            };\n\n            if (options.getdata !== undefined && options.getdata !== null) {\n                if (options.getdata.constructor === Object) {\n                    var queryString = laroux_helpers.buildQueryString(options.getdata);\n                    if (queryString.length > 0) {\n                        url += ((url.indexOf('?') < 0) ? '?' : '&') + queryString;\n                    }\n                } else {\n                    url += ((url.indexOf('?') < 0) ? '?' : '&') + options.getdata;\n                }\n            }\n\n            if (options.jsonp !== undefined) {\n                url += ((url.indexOf('?') < 0) ? '?' : '&') + 'jsonp=' + options.jsonp;\n            }\n\n            if (!laroux_ajax.xDomainObject) {\n                xhr.open(options.type, url, true);\n            } else {\n                xhr.open(options.type, url);\n            }\n\n            try {\n                if (options.xhrFields !== undefined) {\n                    for (var i in options.xhrFields) {\n                        if (!options.xhrFields.hasOwnProperty(i)) {\n                            continue;\n                        }\n\n                        xhr[i] = options.xhrFields[i];\n                    }\n                }\n\n                var headers = options.headers || {};\n\n                if (!cors) {\n                    headers['X-Requested-With'] = 'XMLHttpRequest';\n\n                    if (options.wrapper) {\n                        headers['X-Wrapper-Function'] = 'laroux.js';\n                    }\n                }\n\n                for (var j in headers) {\n                    if (!headers.hasOwnProperty(j)) {\n                        continue;\n                    }\n\n                    xhr.setRequestHeader(j, headers[j]);\n                }\n            } catch (e) {\n                console.log(e);\n            }\n\n            if (options.postdata === undefined || options.postdata === null) {\n                xhr.send(null);\n                return;\n            }\n\n            switch (options.postdatatype) {\n                case 'json':\n                    xhr.send(JSON.stringify(options.postdata));\n                    break;\n                case 'form':\n                    xhr.send(laroux_helpers.buildFormData(options.postdata));\n                    break;\n                default:\n                    xhr.send(options.postdata);\n                    break;\n            }\n        },\n\n        get: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'html',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'json',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJsonP: function (path, values, method, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                jsonp: method,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getScript: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        post: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'form',\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        postJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'json',\n                headers: {\n                    'Content-Type': 'application/json; charset=UTF-8'\n                },\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        }\n    };\n\n    return laroux_ajax;\n\n}());\n","/**\n * laroux.js base - A jquery substitute for modern browsers\n *\n * @version v2.0.0\n * @link https://larukedi.github.io/laroux.js\n * @license Apache-2.0\n */\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (global){\nmodule.exports = (function (scope) {\n    'use strict';\n\n    // core\n    var laroux;\n    laroux = function () {\n    };\n    // modules\n    laroux.events = require('./laroux.events.js');\n    laroux.helpers = require('./laroux.helpers.js');\n    laroux.ajax = require('./laroux.ajax.js');\n    laroux.timers = require('./laroux.timers.js');\n    laroux.triggers = require('./laroux.triggers.js');\n    laroux.vars = require('./laroux.vars.js');\n    laroux.date = require('./laroux.date.js');\n    laroux.stack = require('./laroux.stack.js');\n\n    laroux.extend = function () {\n        Array.prototype.unshift.call(arguments, laroux);\n        laroux.helpers.extendObject.apply(this, arguments);\n    };\n\n    laroux.extendObject = laroux.helpers.extendObject;\n    laroux.each = laroux.helpers.each;\n    laroux.map = laroux.helpers.map;\n    laroux.index = laroux.helpers.index;\n    laroux.aeach = laroux.helpers.aeach;\n    laroux.amap = laroux.helpers.amap;\n    laroux.aindex = laroux.helpers.aindex;\n\n    if (!('$l' in scope)) {\n        scope.$l = laroux;\n    }\n\n    return laroux;\n\n}(typeof window !== 'undefined' ? window : global));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./laroux.ajax.js\":2,\"./laroux.date.js\":3,\"./laroux.events.js\":4,\"./laroux.helpers.js\":5,\"./laroux.stack.js\":6,\"./laroux.timers.js\":7,\"./laroux.triggers.js\":8,\"./laroux.vars.js\":9}],2:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_events = require('./laroux.events.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // ajax - partially taken from 'jquery in parts' project\n    //        can be found at: https://github.com/mythz/jquip/\n    var laroux_ajax = {\n        corsDefault: false,\n\n        wrappers: {\n            registry: {\n                'laroux.js': function (data) {\n                    if (!data.isSuccess) {\n                        console.log('Error: ' + data.errorMessage);\n                        return;\n                    }\n\n                    var obj;\n\n                    if (data.format === 'json') {\n                        obj = JSON.parse(data.object);\n                    } else if (data.format === 'script') {\n                        /*jshint evil:true */\n                        /*jslint evil:true */\n                        obj = eval(data.object);\n                    } else { // if (data.format == 'xml') {\n                        obj = data.object;\n                    }\n\n                    return obj;\n                }\n            },\n\n            set: function (name, fnc) {\n                laroux_ajax.wrappers.registry[name] = fnc;\n            }\n        },\n\n        xDomainObject: false,\n        xmlHttpRequestObject: null,\n        xDomainRequestObject: null,\n        xhr: function (crossDomain) {\n            if (laroux_ajax.xmlHttpRequestObject === null) {\n                laroux_ajax.xmlHttpRequestObject = new XMLHttpRequest();\n            }\n\n            if (crossDomain) {\n                if (!('withCredentials' in laroux_ajax.xmlHttpRequestObject) && typeof XDomainRequest !== 'undefined') {\n                    laroux_ajax.xDomainObject = true;\n\n                    if (laroux_ajax.xDomainRequestObject === null) {\n                        laroux_ajax.xDomainRequestObject = new XDomainRequest();\n                    }\n\n                    return laroux_ajax.xDomainRequestObject;\n                }\n            } else {\n                laroux_ajax.xDomainObject = false;\n            }\n\n            return laroux_ajax.xmlHttpRequestObject;\n        },\n\n        xhrResp: function (xhr, options) {\n            var wrapperFunction = xhr.getResponseHeader('X-Response-Wrapper-Function'),\n                response;\n\n            if (options.datatype === undefined) {\n                response = xhr.responseText;\n            } else if (options.datatype === 'json') {\n                response = JSON.parse(xhr.responseText);\n            } else if (options.datatype === 'script') {\n                /*jshint evil:true */\n                /*jslint evil:true */\n                response = eval(xhr.responseText);\n            } else if (options.datatype === 'xml') {\n                response = xhr.responseXML;\n            } else {\n                response = xhr.responseText;\n            }\n\n            if (wrapperFunction && (wrapperFunction in laroux_ajax.wrappers.registry)) {\n                response = laroux_ajax.wrappers.registry[wrapperFunction](response);\n            }\n\n            return {\n                response: response,\n                wrapperFunc: wrapperFunction\n            };\n        },\n\n        makeRequest: function (options) {\n            var cors = options.cors || laroux_ajax.corsDefault,\n                xhr = laroux_ajax.xhr(cors),\n                url = options.url,\n                timer = null,\n                n = 0;\n\n            if (options.timeout !== undefined) {\n                timer = setTimeout(\n                    function () {\n                        xhr.abort();\n                        if (options.timeoutFn !== undefined) {\n                            options.timeoutFn(options.url);\n                        }\n                    },\n                    options.timeout\n                );\n            }\n\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                    if (timer !== null) {\n                        clearTimeout(timer);\n                    }\n\n                    if (xhr.status < 300) {\n                        var res = null,\n                            isSuccess = true;\n\n                        try {\n                            res = laroux_ajax.xhrResp(xhr, options);\n                        } catch (e) {\n                            if (options.error !== undefined) {\n                                options.error(xhr, xhr.status, xhr.statusText);\n                            }\n\n                            laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                            isSuccess = false;\n                        }\n\n                        if (isSuccess) {\n                            if (options.success !== undefined && res !== null) {\n                                options.success(res.response, res.wrapperFunc);\n                            }\n\n                            laroux_events.invoke('ajaxSuccess', [xhr, res.response, res.wrapperFunc, options]);\n                        }\n                    } else {\n                        if (options.error !== undefined) {\n                            options.error(xhr, xhr.status, xhr.statusText);\n                        }\n\n                        laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                    }\n\n                    if (options.complete !== undefined) {\n                        options.complete(xhr, xhr.statusText);\n                    }\n\n                    laroux_events.invoke('ajaxComplete', [xhr, xhr.statusText, options]);\n                } else if (options.progress !== undefined) {\n                    /*jslint plusplus: true */\n                    options.progress(++n);\n                }\n            };\n\n            if (options.getdata !== undefined && options.getdata !== null) {\n                if (options.getdata.constructor === Object) {\n                    var queryString = laroux_helpers.buildQueryString(options.getdata);\n                    if (queryString.length > 0) {\n                        url += ((url.indexOf('?') < 0) ? '?' : '&') + queryString;\n                    }\n                } else {\n                    url += ((url.indexOf('?') < 0) ? '?' : '&') + options.getdata;\n                }\n            }\n\n            if (options.jsonp !== undefined) {\n                url += ((url.indexOf('?') < 0) ? '?' : '&') + 'jsonp=' + options.jsonp;\n            }\n\n            if (!laroux_ajax.xDomainObject) {\n                xhr.open(options.type, url, true);\n            } else {\n                xhr.open(options.type, url);\n            }\n\n            try {\n                if (options.xhrFields !== undefined) {\n                    for (var i in options.xhrFields) {\n                        if (!options.xhrFields.hasOwnProperty(i)) {\n                            continue;\n                        }\n\n                        xhr[i] = options.xhrFields[i];\n                    }\n                }\n\n                var headers = options.headers || {};\n\n                if (!cors) {\n                    headers['X-Requested-With'] = 'XMLHttpRequest';\n\n                    if (options.wrapper) {\n                        headers['X-Wrapper-Function'] = 'laroux.js';\n                    }\n                }\n\n                for (var j in headers) {\n                    if (!headers.hasOwnProperty(j)) {\n                        continue;\n                    }\n\n                    xhr.setRequestHeader(j, headers[j]);\n                }\n            } catch (e) {\n                console.log(e);\n            }\n\n            if (options.postdata === undefined || options.postdata === null) {\n                xhr.send(null);\n                return;\n            }\n\n            switch (options.postdatatype) {\n                case 'json':\n                    xhr.send(JSON.stringify(options.postdata));\n                    break;\n                case 'form':\n                    xhr.send(laroux_helpers.buildFormData(options.postdata));\n                    break;\n                default:\n                    xhr.send(options.postdata);\n                    break;\n            }\n        },\n\n        get: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'html',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'json',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJsonP: function (path, values, method, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                jsonp: method,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getScript: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        post: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'form',\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        postJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'json',\n                headers: {\n                    'Content-Type': 'application/json; charset=UTF-8'\n                },\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        }\n    };\n\n    return laroux_ajax;\n\n}());\n\n},{\"./laroux.events.js\":4,\"./laroux.helpers.js\":5}],3:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // date\n    var laroux_date = {\n        shortDateFormat: 'dd.MM.yyyy',\n        longDateFormat: 'dd MMMM yyyy',\n        timeFormat: 'HH:mm',\n\n        monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        monthsLong: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n\n        strings: {\n            now:     'now',\n            later:   'later',\n            ago:     'ago',\n            seconds: 'seconds',\n            aminute: 'a minute',\n            minutes: 'minutes',\n            ahour:   'a hour',\n            hours:   'hours',\n            aday:    'a day',\n            days:    'days',\n            aweek:   'a week',\n            weeks:   'weeks',\n            amonth:  'a month',\n            months:  'months',\n            ayear:   'a year',\n            years:   'years'\n        },\n\n        parseEpoch: function (timespan, limitWithWeeks) {\n            if (timespan < 60 * 1000) {\n                timespan = Math.ceil(timespan / 1000);\n\n                return timespan + ' ' + laroux_date.strings.seconds;\n            }\n\n            if (timespan < 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aminute;\n                }\n\n                return timespan + ' ' + laroux_date.strings.minutes;\n            }\n\n            if (timespan < 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.ahour;\n                }\n\n                return timespan + ' ' + laroux_date.strings.hours;\n            }\n\n            if (timespan < 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aday;\n                }\n\n                return timespan + ' ' + laroux_date.strings.days;\n            }\n\n            if (timespan < 4 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (7 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aweek;\n                }\n\n                return timespan + ' ' + laroux_date.strings.weeks;\n            }\n\n            if (limitWithWeeks === true) {\n                return null;\n            }\n\n            if (timespan < 30 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (30 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.amonth;\n                }\n\n                return timespan + ' ' + laroux_date.strings.months;\n            }\n\n            timespan = Math.ceil(timespan / (365 * 24 * 60 * 60 * 1000));\n\n            if (timespan === 1) {\n                return laroux_date.strings.ayear;\n            }\n\n            return timespan + ' ' + laroux_date.strings.years;\n        },\n\n        getCustomDateString: function (format, date) {\n            var now = date || new Date();\n\n            return format.replace(\n                /yyyy|yy|MMMM|MMM|MM|M|dd|d|hh|h|HH|H|mm|m|ss|s|tt|t/g,\n                function (match) {\n                    switch (match) {\n                    case 'yyyy':\n                        return now.getFullYear();\n\n                    case 'yy':\n                        return now.getYear();\n\n                    case 'MMMM':\n                        return laroux_date.monthsLong[now.getMonth()];\n\n                    case 'MMM':\n                        return laroux_date.monthsShort[now.getMonth()];\n\n                    case 'MM':\n                        return ('0' + (now.getMonth() + 1)).substr(-2, 2);\n\n                    case 'M':\n                        return now.getMonth() + 1;\n\n                    case 'dd':\n                        return ('0' + now.getDate()).substr(-2, 2);\n\n                    case 'd':\n                        return now.getDate();\n\n                    case 'hh':\n                        var hour1 = now.getHours();\n                        return ('0' + (((hour1 % 12) > 0) ? hour1 % 12 : 12)).substr(-2, 2);\n\n                    case 'h':\n                        var hour2 = now.getHours();\n                        return ((hour2 % 12) > 0) ? hour2 % 12 : 12;\n\n                    case 'HH':\n                        return ('0' + now.getHours()).substr(-2, 2);\n\n                    case 'H':\n                        return now.getHours();\n\n                    case 'mm':\n                        return ('0' + now.getMinutes()).substr(-2, 2);\n\n                    case 'm':\n                        return now.getMinutes();\n\n                    case 'ss':\n                        return ('0' + now.getSeconds()).substr(-2, 2);\n\n                    case 's':\n                        return now.getSeconds();\n\n                    case 'tt':\n                        if (now.getHours() >= 12) {\n                            return 'pm';\n                        }\n\n                        return 'am';\n\n                    case 't':\n                        if (now.getHours() >= 12) {\n                            return 'p';\n                        }\n\n                        return 'a';\n                    }\n\n                    return match;\n                }\n            );\n        },\n\n        getDateDiffString: function (date) {\n            var now = Date.now(),\n                timespan = now - date.getTime(),\n                absTimespan = Math.abs(timespan),\n                past = (timespan > 0);\n\n            if (absTimespan <= 3000) {\n                return laroux_date.strings.now;\n            }\n\n            var timespanstring = laroux_date.parseEpoch(absTimespan, true);\n            if (timespanstring !== null) {\n                return timespanstring +\n                    ' ' +\n                    (past ? laroux_date.strings.ago : laroux_date.strings.later);\n            }\n\n            return laroux_date.getShortDateString(date, true);\n        },\n\n        getShortDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.shortDateFormat + ' ' + laroux_date.timeFormat : laroux_date.shortDateFormat,\n                date\n            );\n        },\n\n        getLongDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.longDateFormat + ' ' + laroux_date.timeFormat : laroux_date.longDateFormat,\n                date\n            );\n        }\n    };\n\n    return laroux_date;\n\n}());\n\n},{}],4:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // events\n    var laroux_events = {\n        delegates: [],\n\n        add: function (event, fnc) {\n            laroux_events.delegates.push({ event: event, fnc: fnc });\n        },\n\n        invoke: function (event, args) {\n            for (var item in laroux_events.delegates) {\n                if (!laroux_events.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_events.delegates[item].event != event) {\n                    continue;\n                }\n\n                laroux_events.delegates[item].fnc(args);\n            }\n        }\n    };\n\n    return laroux_events;\n\n}());\n\n},{}],5:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // helpers\n    var laroux_helpers = {\n        uniqueId: 0,\n\n        getUniqueId: function () {\n            /*jslint plusplus: true */\n            return 'uid-' + (++laroux_helpers.uniqueId);\n        },\n\n        buildQueryString: function (values, rfc3986) {\n            var uri = '',\n                regEx = /%20/g;\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    if (rfc3986 || false) {\n                        uri += '&' + encodeURIComponent(name).replace(regEx, '+') + '=' + encodeURIComponent(values[name].toString()).replace(regEx, '+');\n                    } else {\n                        uri += '&' + encodeURIComponent(name) + '=' + encodeURIComponent(values[name].toString());\n                    }\n                }\n            }\n\n            return uri.substr(1);\n        },\n\n        buildFormData: function (values) {\n            var data = new FormData();\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    data.append(name, values[name]);\n                }\n            }\n\n            return data;\n        },\n\n        format: function () {\n            var args = arguments;\n            return Array.prototype.shift.call(args).replace(\n                /%s/g,\n                function () {\n                    return Array.prototype.shift.call(args);\n                }\n            );\n        },\n\n        replaceAll: function (text, dictionary) {\n            var re = new RegExp(Object.keys(dictionary).join('|'), 'g');\n\n            return text.replace(\n                re,\n                function (match) {\n                    return dictionary[match];\n                }\n            );\n        },\n\n        camelCase: function (value) {\n            var flag = false;\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar == '-') {\n                    flag = true;\n                    continue;\n                }\n\n                output += (!flag) ? currChar : currChar.toUpperCase();\n                flag = false;\n            }\n\n            return output;\n        },\n\n        antiCamelCase: function (value) {\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar != '-' && currChar == currChar.toUpperCase()) {\n                    output += '-' + currChar.toLowerCase();\n                    continue;\n                }\n\n                output += currChar;\n            }\n\n            return output;\n        },\n\n        quoteAttr: function (value) {\n            return value.replace(/&/g, '&amp;')\n                        .replace(/'/g, '&apos;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/</g, '&lt;')\n                        .replace(/>/g, '&gt;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/\\r\\n/g, '&#13;')\n                        .replace(/[\\r\\n]/g, '&#13;');\n        },\n\n        spliceString: function (value, index, count, add) {\n            return value.slice(0, index) + (add || '') + value.slice(index + count);\n        },\n\n        random: function (min, max) {\n            return min + Math.floor(Math.random() * (max - min + 1));\n        },\n\n        find: function (obj, iterator, context) {\n            var result;\n\n            obj.some(function (value, index, list) {\n                if (iterator.call(context, value, index, list)) {\n                    result = value;\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        extendObject: function () {\n            var target = Array.prototype.shift.call(arguments),\n                isArray = target instanceof Array;\n\n            for (var item in arguments) {\n                for (var name in arguments[item]) {\n                    // if (isArray) {\n                    //     target.push(arguments[item][name]);\n                    //     continue;\n                    // }\n\n                    /* target[name].constructor === Object */\n                    if (target.hasOwnProperty(name) && target[name] instanceof Object) {\n                        laroux_helpers.extendObject(target[name], arguments[item][name]);\n                        continue;\n                    }\n\n                    target[name] = arguments[item][name];\n                }\n            }\n        },\n\n        each: function (arr, fnc, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (fnc(item, arr[item]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        map: function (arr, fnc, dontSkipReturns, testOwnProperties) {\n            var results = [];\n\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var result = fnc(arr[item], item);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.push(result);\n                }\n            }\n\n            return results;\n        },\n\n        index: function (arr, value, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (arr[item] === object) {\n                    return item;\n                }\n            }\n\n            return null;\n        },\n\n        aeach: function (arr, fnc) {\n            for (var i = 0, length = arr.length; i < length; i++) {\n                if (fnc(i, arr[i]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        amap: function (arr, fnc, dontSkipReturns) {\n            var results = [];\n\n            for (var i = 0, length = arr.length; i < length; i++) {\n                var result = fnc(arr[i], i);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.unshift(result);\n                }\n            }\n\n            return results;\n        },\n\n        aindex: function (arr, value, start) {\n            for (var i = (start || 0), length = arr.length; i < length; i++) {\n                if (arr[i] === value) {\n                    return i;\n                }\n            }\n\n            return -1;\n        },\n\n        column: function (obj, key) {\n            return laroux_helpers.map(\n                obj,\n                function (value) {\n                    return value[key];\n                },\n                true\n            );\n        },\n\n        shuffle: function (obj) {\n            var index = 0,\n                shuffled = [];\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var rand = laroux_helpers.random(0, index);\n                shuffled[index++] = shuffled[rand];\n                shuffled[rand] = obj[item];\n            }\n\n            return shuffled;\n        },\n\n        merge: function () {\n            var target = Array.prototype.shift.call(arguments),\n                tmp = target,\n                isArray = tmp instanceof Array;\n\n            for (var item in arguments) {\n                if (isArray) {\n                    tmp = tmp.concat(arguments[item]);\n                    continue;\n                }\n\n                for (var attr in arguments[item]) {\n                    if (!arguments[item].hasOwnProperty(attr)) {\n                        continue;\n                    }\n\n                    tmp[attr] = arguments[item][attr];\n                }\n            }\n\n            return tmp;\n        },\n\n        duplicate: function (obj) {\n            return JSON.parse(JSON.stringify(obj));\n        },\n\n        toArray: function (obj) {\n            var length = obj.length,\n                items = new Array(length);\n\n            for (var i = 0; i < length; i++) {\n                items[i] = obj[i];\n            }\n\n            return items;\n        },\n\n        getAsArray: function (obj) {\n            var items;\n\n            if (obj instanceof Array) {\n                items = obj;\n            } else if (obj instanceof NodeList) {\n                var length = obj.length;\n\n                items = new Array(length);\n                for (var i = 0; i < length; i++) {\n                    items[i] = obj[i];\n                }\n            } else {\n                items = [obj];\n            }\n\n            return items;\n        },\n\n        getLength: function (obj) {\n            if (obj.constructor === Object) {\n                if (obj.length !== undefined) {\n                    return obj.length;\n                }\n\n                return Object.keys(obj).length;\n            }\n\n            return -1;\n        },\n\n        getKeysRecursive: function (obj, delimiter, prefix, keys) {\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            if (prefix === undefined) {\n                prefix = '';\n                keys = [];\n            }\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                keys.push(prefix + item);\n\n                if (obj[item] !== undefined && obj[item] !== null && obj[item].constructor === Object) {\n                    laroux_helpers.getKeysRecursive(obj[item], delimiter, prefix + item + delimiter, keys);\n                    continue;\n                }\n            }\n\n            return keys;\n        },\n\n        getElement: function (obj, path, defaultValue, delimiter) {\n            if (defaultValue === undefined) {\n                defaultValue = null;\n            }\n\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            var pos = path.indexOf(delimiter);\n            var key;\n            var rest;\n            if (pos === -1) {\n                key = path;\n                rest = null;\n            } else {\n                key = path.substring(0, pos);\n                rest = path.substring(pos + 1);\n            }\n\n            if (!(key in obj)) {\n                return defaultValue;\n            }\n\n            if (rest === null || rest.length === 0) {\n                return obj[key];\n            }\n\n            return laroux_helpers.getElement(obj[key], rest, defaultValue, delimiter);\n        }\n    };\n\n    return laroux_helpers;\n\n}());\n\n},{}],6:[function(require,module,exports){\n/*jslint nomen: true */\nmodule.exports = (function () {\n    'use strict';\n\n    // stack\n    var laroux_stack = function (data, depth, top) {\n        if (!(this instanceof laroux_stack)) {\n            return new this(data, depth, top);\n        }\n\n        this._data = {};\n        this._depth = depth;\n        this._top = top || this;\n\n        this.set = function (key, value) {\n            // delete this._data[key];\n\n            var type = typeof value;\n            switch (type) {\n            case 'function':\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key]();\n                        }\n                    }\n                );\n                break;\n\n            default:\n                /*\n                if (type == 'object') {\n                    this._data[key] = new laroux_stack(\n                        value,\n                        this._depth ?\n                            this._depth + '.' + key :\n                            key,\n                        this._top\n                    );\n                } else {\n                    this._data[key] = value;\n                }\n                */\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key];\n                        },\n                        set: function (newValue) {\n                            var oldValue = this._data[key];\n                            if (this._data[key] === newValue) {\n                                return;\n                            }\n\n                            // this.set(this, key, newValue);\n                            this._data[key] = newValue;\n                            this._top.onupdate({ scope: this, key: key, oldValue: oldValue, newValue: newValue });\n                        }\n                    }\n                );\n                break;\n            }\n        };\n\n        this.setRange = function (values) {\n            for (var valueKey in values) {\n                if (!values.hasOwnProperty(valueKey)) {\n                    continue;\n                }\n\n                this.set(valueKey, values[valueKey]);\n            }\n        };\n\n        this.get = function (key, defaultValue) {\n            return this[key] || defaultValue || null;\n        };\n\n        this.getRange = function (keys) {\n            var values = {};\n\n            for (var item in keys) {\n                if (!keys.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                values[keys[item]] = this[keys[item]];\n            }\n\n            return values;\n        };\n\n        this.keys = function () {\n            return Object.keys(this._data);\n        };\n\n        this.length = function () {\n            return Object.keys(this._data).length;\n        };\n\n        this.exists = function (key) {\n            return (key in this._data);\n        };\n\n        this.remove = function (key) {\n            if (key in this._data) {\n                delete this[key];\n                delete this._data[key];\n            }\n        };\n\n        this.clear = function () {\n            for (var item in this._data) {\n                if (!this._data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                delete this[item];\n                delete this._data[item];\n            }\n\n            this._data = {};\n        };\n\n        this.onupdate = function (event) {\n        };\n\n        if (data) {\n            this.setRange(data);\n        }\n    };\n\n    return laroux_stack;\n\n}());\n\n},{}],7:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // timers\n    var laroux_timers = {\n        data: [],\n\n        set: function (timer) {\n            timer.next = Date.now() + timer.timeout;\n            laroux_timers.data.push(timer);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux_timers.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        ontick: function () {\n            var now = Date.now();\n\n            var removeKeys = [];\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.next <= now) {\n                    var result = currentItem.ontick(currentItem.state);\n\n                    if (result !== false && currentItem.reset) {\n                        currentItem.next = now + currentItem.timeout;\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_timers.data.splice(removeKeys[item2], 1);\n            }\n        }\n    };\n\n    return laroux_timers;\n\n}());\n\n},{}],8:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n\n    // triggers\n    var laroux_triggers = {\n        delegates: [],\n        list: [],\n\n        set: function (condition, fnc, state) {\n            var conditions = laroux_helpers.getAsArray(condition);\n\n            for (var item in conditions) {\n                if (!conditions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_helpers.aindex(laroux_triggers.list, conditions[item]) === -1) {\n                    laroux_triggers.list.push(conditions[item]);\n                }\n            }\n\n            laroux_triggers.delegates.push({\n                conditions: conditions,\n                fnc: fnc,\n                state: state\n            });\n        },\n\n        ontrigger: function (triggerName, args) {\n            var eventIdx = laroux_helpers.aindex(laroux_triggers.list, triggerName);\n            if (eventIdx !== -1) {\n                laroux_triggers.list.splice(eventIdx, 1);\n            }\n\n            var removeKeys = [];\n            for (var item in laroux_triggers.delegates) {\n                if (!laroux_triggers.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var count = 0;\n                var currentItem = laroux_triggers.delegates[item];\n\n                for (var conditionKey in currentItem.conditions) {\n                    if (!currentItem.conditions.hasOwnProperty(conditionKey)) {\n                        continue;\n                    }\n\n                    var conditionObj = currentItem.conditions[conditionKey];\n\n                    if (laroux_helpers.aindex(laroux_triggers.list, conditionObj) !== -1) {\n                        count++;\n                        // break;\n                    }\n                }\n\n                if (count === 0) {\n                    currentItem.fnc(\n                        {\n                            state: currentItem.state,\n                            args: laroux_helpers.getAsArray(args)\n                        }\n                    );\n                    removeKeys.unshift(item);\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_triggers.delegates.splice(removeKeys[item2], 1);\n            }\n\n            // console.log('trigger name: ' + triggerName);\n        }\n    };\n\n    return laroux_triggers;\n\n}());\n\n},{\"./laroux.helpers.js\":5}],9:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // vars\n    var laroux_vars = {\n        cookiePath: '/',\n\n        getCookie: function (name, defaultValue) {\n            var re = new RegExp(encodeURIComponent(name) + '=[^;]+', 'i'),\n                match = document.cookie.match(re);\n\n            if (!match) {\n                return defaultValue || null;\n            }\n\n            return decodeURIComponent(match[0].split('=')[1]);\n        },\n\n        setCookie: function (name, value, expires, path) {\n            var expireValue = '';\n            if (expires) {\n                expireValue = '; expires=' + expires.toGMTString();\n            }\n\n            document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value) + expireValue + '; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        removeCookie: function (name, path) {\n            document.cookie = encodeURIComponent(name) + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        getLocal: function (name, defaultValue) {\n            if (!(name in localStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(localStorage[name]);\n        },\n\n        setLocal: function (name, value) {\n            localStorage[name] = JSON.stringify(value);\n        },\n\n        removeLocal: function (name) {\n            delete localStorage[name];\n        },\n\n        getSession: function (name, defaultValue) {\n            if (!(name in sessionStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(sessionStorage[name]);\n        },\n\n        setSession: function (name, value) {\n            sessionStorage[name] = JSON.stringify(value);\n        },\n\n        removeSession: function (name) {\n            delete sessionStorage[name];\n        }\n    };\n\n    return laroux_vars;\n\n}());\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJ0ZW1wL2Jhc2UvbGFyb3V4LmpzIiwidGVtcC9iYXNlL2xhcm91eC5hamF4LmpzIiwidGVtcC9iYXNlL2xhcm91eC5kYXRlLmpzIiwidGVtcC9iYXNlL2xhcm91eC5ldmVudHMuanMiLCJ0ZW1wL2Jhc2UvbGFyb3V4LmhlbHBlcnMuanMiLCJ0ZW1wL2Jhc2UvbGFyb3V4LnN0YWNrLmpzIiwidGVtcC9iYXNlL2xhcm91eC50aW1lcnMuanMiLCJ0ZW1wL2Jhc2UvbGFyb3V4LnRyaWdnZXJzLmpzIiwidGVtcC9iYXNlL2xhcm91eC52YXJzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOVRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoc2NvcGUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyBjb3JlXG4gICAgdmFyIGxhcm91eDtcbiAgICBsYXJvdXggPSBmdW5jdGlvbiAoKSB7XG4gICAgfTtcbiAgICAvLyBtb2R1bGVzXG4gICAgbGFyb3V4LmV2ZW50cyA9IHJlcXVpcmUoJy4vbGFyb3V4LmV2ZW50cy5qcycpO1xuICAgIGxhcm91eC5oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpO1xuICAgIGxhcm91eC5hamF4ID0gcmVxdWlyZSgnLi9sYXJvdXguYWpheC5qcycpO1xuICAgIGxhcm91eC50aW1lcnMgPSByZXF1aXJlKCcuL2xhcm91eC50aW1lcnMuanMnKTtcbiAgICBsYXJvdXgudHJpZ2dlcnMgPSByZXF1aXJlKCcuL2xhcm91eC50cmlnZ2Vycy5qcycpO1xuICAgIGxhcm91eC52YXJzID0gcmVxdWlyZSgnLi9sYXJvdXgudmFycy5qcycpO1xuICAgIGxhcm91eC5kYXRlID0gcmVxdWlyZSgnLi9sYXJvdXguZGF0ZS5qcycpO1xuICAgIGxhcm91eC5zdGFjayA9IHJlcXVpcmUoJy4vbGFyb3V4LnN0YWNrLmpzJyk7XG5cbiAgICBsYXJvdXguZXh0ZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cywgbGFyb3V4KTtcbiAgICAgICAgbGFyb3V4LmhlbHBlcnMuZXh0ZW5kT2JqZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIGxhcm91eC5leHRlbmRPYmplY3QgPSBsYXJvdXguaGVscGVycy5leHRlbmRPYmplY3Q7XG4gICAgbGFyb3V4LmVhY2ggPSBsYXJvdXguaGVscGVycy5lYWNoO1xuICAgIGxhcm91eC5tYXAgPSBsYXJvdXguaGVscGVycy5tYXA7XG4gICAgbGFyb3V4LmluZGV4ID0gbGFyb3V4LmhlbHBlcnMuaW5kZXg7XG4gICAgbGFyb3V4LmFlYWNoID0gbGFyb3V4LmhlbHBlcnMuYWVhY2g7XG4gICAgbGFyb3V4LmFtYXAgPSBsYXJvdXguaGVscGVycy5hbWFwO1xuICAgIGxhcm91eC5haW5kZXggPSBsYXJvdXguaGVscGVycy5haW5kZXg7XG5cbiAgICBpZiAoISgnJGwnIGluIHNjb3BlKSkge1xuICAgICAgICBzY29wZS4kbCA9IGxhcm91eDtcbiAgICB9XG5cbiAgICByZXR1cm4gbGFyb3V4O1xuXG59KHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogZ2xvYmFsKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9ldmVudHMgPSByZXF1aXJlKCcuL2xhcm91eC5ldmVudHMuanMnKSxcbiAgICAgICAgbGFyb3V4X2hlbHBlcnMgPSByZXF1aXJlKCcuL2xhcm91eC5oZWxwZXJzLmpzJyk7XG5cbiAgICAvLyBhamF4IC0gcGFydGlhbGx5IHRha2VuIGZyb20gJ2pxdWVyeSBpbiBwYXJ0cycgcHJvamVjdFxuICAgIC8vICAgICAgICBjYW4gYmUgZm91bmQgYXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9teXRoei9qcXVpcC9cbiAgICB2YXIgbGFyb3V4X2FqYXggPSB7XG4gICAgICAgIGNvcnNEZWZhdWx0OiBmYWxzZSxcblxuICAgICAgICB3cmFwcGVyczoge1xuICAgICAgICAgICAgcmVnaXN0cnk6IHtcbiAgICAgICAgICAgICAgICAnbGFyb3V4LmpzJzogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhLmlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOiAnICsgZGF0YS5lcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iajtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5mb3JtYXQgPT09ICdqc29uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gSlNPTi5wYXJzZShkYXRhLm9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5mb3JtYXQgPT09ICdzY3JpcHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKmpzaGludCBldmlsOnRydWUgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qanNsaW50IGV2aWw6dHJ1ZSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gZXZhbChkYXRhLm9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGlmIChkYXRhLmZvcm1hdCA9PSAneG1sJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gZGF0YS5vYmplY3Q7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5hbWUsIGZuYykge1xuICAgICAgICAgICAgICAgIGxhcm91eF9hamF4LndyYXBwZXJzLnJlZ2lzdHJ5W25hbWVdID0gZm5jO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHhEb21haW5PYmplY3Q6IGZhbHNlLFxuICAgICAgICB4bWxIdHRwUmVxdWVzdE9iamVjdDogbnVsbCxcbiAgICAgICAgeERvbWFpblJlcXVlc3RPYmplY3Q6IG51bGwsXG4gICAgICAgIHhocjogZnVuY3Rpb24gKGNyb3NzRG9tYWluKSB7XG4gICAgICAgICAgICBpZiAobGFyb3V4X2FqYXgueG1sSHR0cFJlcXVlc3RPYmplY3QgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfYWpheC54bWxIdHRwUmVxdWVzdE9iamVjdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY3Jvc3NEb21haW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoISgnd2l0aENyZWRlbnRpYWxzJyBpbiBsYXJvdXhfYWpheC54bWxIdHRwUmVxdWVzdE9iamVjdCkgJiYgdHlwZW9mIFhEb21haW5SZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfYWpheC54RG9tYWluT2JqZWN0ID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobGFyb3V4X2FqYXgueERvbWFpblJlcXVlc3RPYmplY3QgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9hamF4LnhEb21haW5SZXF1ZXN0T2JqZWN0ID0gbmV3IFhEb21haW5SZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2FqYXgueERvbWFpblJlcXVlc3RPYmplY3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfYWpheC54RG9tYWluT2JqZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBsYXJvdXhfYWpheC54bWxIdHRwUmVxdWVzdE9iamVjdDtcbiAgICAgICAgfSxcblxuICAgICAgICB4aHJSZXNwOiBmdW5jdGlvbiAoeGhyLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlckZ1bmN0aW9uID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdYLVJlc3BvbnNlLVdyYXBwZXItRnVuY3Rpb24nKSxcbiAgICAgICAgICAgICAgICByZXNwb25zZTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGF0YXR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5kYXRhdHlwZSA9PT0gJ2pzb24nKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmRhdGF0eXBlID09PSAnc2NyaXB0Jykge1xuICAgICAgICAgICAgICAgIC8qanNoaW50IGV2aWw6dHJ1ZSAqL1xuICAgICAgICAgICAgICAgIC8qanNsaW50IGV2aWw6dHJ1ZSAqL1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gZXZhbCh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5kYXRhdHlwZSA9PT0gJ3htbCcpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHhoci5yZXNwb25zZVhNTDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAod3JhcHBlckZ1bmN0aW9uICYmICh3cmFwcGVyRnVuY3Rpb24gaW4gbGFyb3V4X2FqYXgud3JhcHBlcnMucmVnaXN0cnkpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBsYXJvdXhfYWpheC53cmFwcGVycy5yZWdpc3RyeVt3cmFwcGVyRnVuY3Rpb25dKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgd3JhcHBlckZ1bmM6IHdyYXBwZXJGdW5jdGlvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcblxuICAgICAgICBtYWtlUmVxdWVzdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBjb3JzID0gb3B0aW9ucy5jb3JzIHx8IGxhcm91eF9hamF4LmNvcnNEZWZhdWx0LFxuICAgICAgICAgICAgICAgIHhociA9IGxhcm91eF9hamF4Lnhocihjb3JzKSxcbiAgICAgICAgICAgICAgICB1cmwgPSBvcHRpb25zLnVybCxcbiAgICAgICAgICAgICAgICB0aW1lciA9IG51bGwsXG4gICAgICAgICAgICAgICAgbiA9IDA7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnRpbWVvdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50aW1lb3V0Rm4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudGltZW91dEZuKG9wdGlvbnMudXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy50aW1lb3V0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXMgPSBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU3VjY2VzcyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gbGFyb3V4X2FqYXgueGhyUmVzcCh4aHIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVycm9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5lcnJvcih4aHIsIHhoci5zdGF0dXMsIHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZXZlbnRzLmludm9rZSgnYWpheEVycm9yJywgW3hociwgeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQsIG9wdGlvbnNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN1Y2Nlc3MgIT09IHVuZGVmaW5lZCAmJiByZXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zdWNjZXNzKHJlcy5yZXNwb25zZSwgcmVzLndyYXBwZXJGdW5jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZXZlbnRzLmludm9rZSgnYWpheFN1Y2Nlc3MnLCBbeGhyLCByZXMucmVzcG9uc2UsIHJlcy53cmFwcGVyRnVuYywgb3B0aW9uc10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZXJyb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZXJyb3IoeGhyLCB4aHIuc3RhdHVzLCB4aHIuc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9ldmVudHMuaW52b2tlKCdhamF4RXJyb3InLCBbeGhyLCB4aHIuc3RhdHVzLCB4aHIuc3RhdHVzVGV4dCwgb3B0aW9uc10pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29tcGxldGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jb21wbGV0ZSh4aHIsIHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF9ldmVudHMuaW52b2tlKCdhamF4Q29tcGxldGUnLCBbeGhyLCB4aHIuc3RhdHVzVGV4dCwgb3B0aW9uc10pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5wcm9ncmVzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qanNsaW50IHBsdXNwbHVzOiB0cnVlICovXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHJvZ3Jlc3MoKytuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5nZXRkYXRhICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5nZXRkYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZ2V0ZGF0YS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeVN0cmluZyA9IGxhcm91eF9oZWxwZXJzLmJ1aWxkUXVlcnlTdHJpbmcob3B0aW9ucy5nZXRkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCArPSAoKHVybC5pbmRleE9mKCc/JykgPCAwKSA/ICc/JyA6ICcmJykgKyBxdWVyeVN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVybCArPSAoKHVybC5pbmRleE9mKCc/JykgPCAwKSA/ICc/JyA6ICcmJykgKyBvcHRpb25zLmdldGRhdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5qc29ucCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdXJsICs9ICgodXJsLmluZGV4T2YoJz8nKSA8IDApID8gJz8nIDogJyYnKSArICdqc29ucD0nICsgb3B0aW9ucy5qc29ucDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFsYXJvdXhfYWpheC54RG9tYWluT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgeGhyLm9wZW4ob3B0aW9ucy50eXBlLCB1cmwsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB4aHIub3BlbihvcHRpb25zLnR5cGUsIHVybCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMueGhyRmllbGRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvcHRpb25zLnhockZpZWxkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLnhockZpZWxkcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHJbaV0gPSBvcHRpb25zLnhockZpZWxkc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFjb3JzKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ1gtUmVxdWVzdGVkLVdpdGgnXSA9ICdYTUxIdHRwUmVxdWVzdCc7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMud3JhcHBlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1snWC1XcmFwcGVyLUZ1bmN0aW9uJ10gPSAnbGFyb3V4LmpzJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gaGVhZGVycykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnMuaGFzT3duUHJvcGVydHkoaikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoaiwgaGVhZGVyc1tqXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wb3N0ZGF0YSA9PT0gdW5kZWZpbmVkIHx8IG9wdGlvbnMucG9zdGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB4aHIuc2VuZChudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN3aXRjaCAob3B0aW9ucy5wb3N0ZGF0YXR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdqc29uJzpcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5wb3N0ZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmb3JtJzpcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQobGFyb3V4X2hlbHBlcnMuYnVpbGRGb3JtRGF0YShvcHRpb25zLnBvc3RkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKG9wdGlvbnMucG9zdGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIChwYXRoLCB2YWx1ZXMsIHN1Y2Nlc3NmbmMsIGVycm9yZm5jLCBjb3JzKSB7XG4gICAgICAgICAgICBsYXJvdXhfYWpheC5tYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBwYXRoLFxuICAgICAgICAgICAgICAgIGRhdGF0eXBlOiAnaHRtbCcsXG4gICAgICAgICAgICAgICAgZ2V0ZGF0YTogdmFsdWVzLFxuICAgICAgICAgICAgICAgIHdyYXBwZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgY29yczogY29ycyB8fCBsYXJvdXhfYWpheC5jb3JzRGVmYXVsdCxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzZm5jLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcmZuY1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0SnNvbjogZnVuY3Rpb24gKHBhdGgsIHZhbHVlcywgc3VjY2Vzc2ZuYywgZXJyb3JmbmMsIGNvcnMpIHtcbiAgICAgICAgICAgIGxhcm91eF9hamF4Lm1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6IHBhdGgsXG4gICAgICAgICAgICAgICAgZGF0YXR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBnZXRkYXRhOiB2YWx1ZXMsXG4gICAgICAgICAgICAgICAgd3JhcHBlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb3JzOiBjb3JzIHx8IGxhcm91eF9hamF4LmNvcnNEZWZhdWx0LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3NmbmMsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yZm5jXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRKc29uUDogZnVuY3Rpb24gKHBhdGgsIHZhbHVlcywgbWV0aG9kLCBzdWNjZXNzZm5jLCBlcnJvcmZuYywgY29ycykge1xuICAgICAgICAgICAgbGFyb3V4X2FqYXgubWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogcGF0aCxcbiAgICAgICAgICAgICAgICBkYXRhdHlwZTogJ3NjcmlwdCcsXG4gICAgICAgICAgICAgICAgZ2V0ZGF0YTogdmFsdWVzLFxuICAgICAgICAgICAgICAgIGpzb25wOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgd3JhcHBlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29yczogY29ycyB8fCBsYXJvdXhfYWpheC5jb3JzRGVmYXVsdCxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzZm5jLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcmZuY1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0U2NyaXB0OiBmdW5jdGlvbiAocGF0aCwgdmFsdWVzLCBzdWNjZXNzZm5jLCBlcnJvcmZuYywgY29ycykge1xuICAgICAgICAgICAgbGFyb3V4X2FqYXgubWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogcGF0aCxcbiAgICAgICAgICAgICAgICBkYXRhdHlwZTogJ3NjcmlwdCcsXG4gICAgICAgICAgICAgICAgZ2V0ZGF0YTogdmFsdWVzLFxuICAgICAgICAgICAgICAgIHdyYXBwZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvcnM6IGNvcnMgfHwgbGFyb3V4X2FqYXguY29yc0RlZmF1bHQsXG4gICAgICAgICAgICAgICAgc3VjY2Vzczogc3VjY2Vzc2ZuYyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JmbmNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHBvc3Q6IGZ1bmN0aW9uIChwYXRoLCB2YWx1ZXMsIHN1Y2Nlc3NmbmMsIGVycm9yZm5jLCBjb3JzKSB7XG4gICAgICAgICAgICBsYXJvdXhfYWpheC5tYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHVybDogcGF0aCxcbiAgICAgICAgICAgICAgICBkYXRhdHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIHBvc3RkYXRhOiB2YWx1ZXMsXG4gICAgICAgICAgICAgICAgcG9zdGRhdGF0eXBlOiAnZm9ybScsXG4gICAgICAgICAgICAgICAgd3JhcHBlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb3JzOiBjb3JzIHx8IGxhcm91eF9hamF4LmNvcnNEZWZhdWx0LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3NmbmMsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yZm5jXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBwb3N0SnNvbjogZnVuY3Rpb24gKHBhdGgsIHZhbHVlcywgc3VjY2Vzc2ZuYywgZXJyb3JmbmMsIGNvcnMpIHtcbiAgICAgICAgICAgIGxhcm91eF9hamF4Lm1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBwYXRoLFxuICAgICAgICAgICAgICAgIGRhdGF0eXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgcG9zdGRhdGE6IHZhbHVlcyxcbiAgICAgICAgICAgICAgICBwb3N0ZGF0YXR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdyYXBwZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgY29yczogY29ycyB8fCBsYXJvdXhfYWpheC5jb3JzRGVmYXVsdCxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzZm5jLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcmZuY1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9hamF4O1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIGRhdGVcbiAgICB2YXIgbGFyb3V4X2RhdGUgPSB7XG4gICAgICAgIHNob3J0RGF0ZUZvcm1hdDogJ2RkLk1NLnl5eXknLFxuICAgICAgICBsb25nRGF0ZUZvcm1hdDogJ2RkIE1NTU0geXl5eScsXG4gICAgICAgIHRpbWVGb3JtYXQ6ICdISDptbScsXG5cbiAgICAgICAgbW9udGhzU2hvcnQ6IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnXSxcbiAgICAgICAgbW9udGhzTG9uZzogWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ10sXG5cbiAgICAgICAgc3RyaW5nczoge1xuICAgICAgICAgICAgbm93OiAgICAgJ25vdycsXG4gICAgICAgICAgICBsYXRlcjogICAnbGF0ZXInLFxuICAgICAgICAgICAgYWdvOiAgICAgJ2FnbycsXG4gICAgICAgICAgICBzZWNvbmRzOiAnc2Vjb25kcycsXG4gICAgICAgICAgICBhbWludXRlOiAnYSBtaW51dGUnLFxuICAgICAgICAgICAgbWludXRlczogJ21pbnV0ZXMnLFxuICAgICAgICAgICAgYWhvdXI6ICAgJ2EgaG91cicsXG4gICAgICAgICAgICBob3VyczogICAnaG91cnMnLFxuICAgICAgICAgICAgYWRheTogICAgJ2EgZGF5JyxcbiAgICAgICAgICAgIGRheXM6ICAgICdkYXlzJyxcbiAgICAgICAgICAgIGF3ZWVrOiAgICdhIHdlZWsnLFxuICAgICAgICAgICAgd2Vla3M6ICAgJ3dlZWtzJyxcbiAgICAgICAgICAgIGFtb250aDogICdhIG1vbnRoJyxcbiAgICAgICAgICAgIG1vbnRoczogICdtb250aHMnLFxuICAgICAgICAgICAgYXllYXI6ICAgJ2EgeWVhcicsXG4gICAgICAgICAgICB5ZWFyczogICAneWVhcnMnXG4gICAgICAgIH0sXG5cbiAgICAgICAgcGFyc2VFcG9jaDogZnVuY3Rpb24gKHRpbWVzcGFuLCBsaW1pdFdpdGhXZWVrcykge1xuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgNjAgKiAxMDAwKSB7XG4gICAgICAgICAgICAgICAgdGltZXNwYW4gPSBNYXRoLmNlaWwodGltZXNwYW4gLyAxMDAwKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0aW1lc3BhbiArICcgJyArIGxhcm91eF9kYXRlLnN0cmluZ3Muc2Vjb25kcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgNjAgKiA2MCAqIDEwMDApIHtcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IE1hdGguY2VpbCh0aW1lc3BhbiAvICg2MCAqIDEwMDApKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aW1lc3BhbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5hbWludXRlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0aW1lc3BhbiArICcgJyArIGxhcm91eF9kYXRlLnN0cmluZ3MubWludXRlcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgMjQgKiA2MCAqIDYwICogMTAwMCkge1xuICAgICAgICAgICAgICAgIHRpbWVzcGFuID0gTWF0aC5jZWlsKHRpbWVzcGFuIC8gKDYwICogNjAgKiAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGltZXNwYW4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLnN0cmluZ3MuYWhvdXI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuICsgJyAnICsgbGFyb3V4X2RhdGUuc3RyaW5ncy5ob3VycztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApIHtcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IE1hdGguY2VpbCh0aW1lc3BhbiAvICgyNCAqIDYwICogNjAgKiAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGltZXNwYW4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLnN0cmluZ3MuYWRheTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGltZXNwYW4gKyAnICcgKyBsYXJvdXhfZGF0ZS5zdHJpbmdzLmRheXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aW1lc3BhbiA8IDQgKiA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkge1xuICAgICAgICAgICAgICAgIHRpbWVzcGFuID0gTWF0aC5jZWlsKHRpbWVzcGFuIC8gKDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGltZXNwYW4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLnN0cmluZ3MuYXdlZWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuICsgJyAnICsgbGFyb3V4X2RhdGUuc3RyaW5ncy53ZWVrcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxpbWl0V2l0aFdlZWtzID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aW1lc3BhbiA8IDMwICogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApIHtcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IE1hdGguY2VpbCh0aW1lc3BhbiAvICgzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aW1lc3BhbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5hbW9udGg7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuICsgJyAnICsgbGFyb3V4X2RhdGUuc3RyaW5ncy5tb250aHM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRpbWVzcGFuID0gTWF0aC5jZWlsKHRpbWVzcGFuIC8gKDM2NSAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLnN0cmluZ3MuYXllYXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aW1lc3BhbiArICcgJyArIGxhcm91eF9kYXRlLnN0cmluZ3MueWVhcnM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0Q3VzdG9tRGF0ZVN0cmluZzogZnVuY3Rpb24gKGZvcm1hdCwgZGF0ZSkge1xuICAgICAgICAgICAgdmFyIG5vdyA9IGRhdGUgfHwgbmV3IERhdGUoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIC95eXl5fHl5fE1NTU18TU1NfE1NfE18ZGR8ZHxoaHxofEhIfEh8bW18bXxzc3xzfHR0fHQvZyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd5eXl5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3cuZ2V0RnVsbFllYXIoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICd5eSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldFllYXIoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdNTU1NJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXJvdXhfZGF0ZS5tb250aHNMb25nW25vdy5nZXRNb250aCgpXTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdNTU0nOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLm1vbnRoc1Nob3J0W25vdy5nZXRNb250aCgpXTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdNTSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIChub3cuZ2V0TW9udGgoKSArIDEpKS5zdWJzdHIoLTIsIDIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ00nOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vdy5nZXRNb250aCgpICsgMTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdkZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIG5vdy5nZXREYXRlKCkpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldERhdGUoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdoaCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaG91cjEgPSBub3cuZ2V0SG91cnMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoJzAnICsgKCgoaG91cjEgJSAxMikgPiAwKSA/IGhvdXIxICUgMTIgOiAxMikpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaG91cjIgPSBub3cuZ2V0SG91cnMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoKGhvdXIyICUgMTIpID4gMCkgPyBob3VyMiAlIDEyIDogMTI7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnSEgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgnMCcgKyBub3cuZ2V0SG91cnMoKSkuc3Vic3RyKC0yLCAyKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdIJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3cuZ2V0SG91cnMoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdtbSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIG5vdy5nZXRNaW51dGVzKCkpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldE1pbnV0ZXMoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIG5vdy5nZXRTZWNvbmRzKCkpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldFNlY29uZHMoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICd0dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm93LmdldEhvdXJzKCkgPj0gMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3BtJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdhbSc7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm93LmdldEhvdXJzKCkgPj0gMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3AnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2EnO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0RGF0ZURpZmZTdHJpbmc6IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IG5vdyAtIGRhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgICAgIGFic1RpbWVzcGFuID0gTWF0aC5hYnModGltZXNwYW4pLFxuICAgICAgICAgICAgICAgIHBhc3QgPSAodGltZXNwYW4gPiAwKTtcblxuICAgICAgICAgICAgaWYgKGFic1RpbWVzcGFuIDw9IDMwMDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5ub3c7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0aW1lc3BhbnN0cmluZyA9IGxhcm91eF9kYXRlLnBhcnNlRXBvY2goYWJzVGltZXNwYW4sIHRydWUpO1xuICAgICAgICAgICAgaWYgKHRpbWVzcGFuc3RyaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuc3RyaW5nICtcbiAgICAgICAgICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgKHBhc3QgPyBsYXJvdXhfZGF0ZS5zdHJpbmdzLmFnbyA6IGxhcm91eF9kYXRlLnN0cmluZ3MubGF0ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuZ2V0U2hvcnREYXRlU3RyaW5nKGRhdGUsIHRydWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldFNob3J0RGF0ZVN0cmluZzogZnVuY3Rpb24gKGRhdGUsIGluY2x1ZGVUaW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuZ2V0Q3VzdG9tRGF0ZVN0cmluZyhcbiAgICAgICAgICAgICAgICBpbmNsdWRlVGltZSA/IGxhcm91eF9kYXRlLnNob3J0RGF0ZUZvcm1hdCArICcgJyArIGxhcm91eF9kYXRlLnRpbWVGb3JtYXQgOiBsYXJvdXhfZGF0ZS5zaG9ydERhdGVGb3JtYXQsXG4gICAgICAgICAgICAgICAgZGF0ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRMb25nRGF0ZVN0cmluZzogZnVuY3Rpb24gKGRhdGUsIGluY2x1ZGVUaW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuZ2V0Q3VzdG9tRGF0ZVN0cmluZyhcbiAgICAgICAgICAgICAgICBpbmNsdWRlVGltZSA/IGxhcm91eF9kYXRlLmxvbmdEYXRlRm9ybWF0ICsgJyAnICsgbGFyb3V4X2RhdGUudGltZUZvcm1hdCA6IGxhcm91eF9kYXRlLmxvbmdEYXRlRm9ybWF0LFxuICAgICAgICAgICAgICAgIGRhdGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9kYXRlO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIGV2ZW50c1xuICAgIHZhciBsYXJvdXhfZXZlbnRzID0ge1xuICAgICAgICBkZWxlZ2F0ZXM6IFtdLFxuXG4gICAgICAgIGFkZDogZnVuY3Rpb24gKGV2ZW50LCBmbmMpIHtcbiAgICAgICAgICAgIGxhcm91eF9ldmVudHMuZGVsZWdhdGVzLnB1c2goeyBldmVudDogZXZlbnQsIGZuYzogZm5jIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGludm9rZTogZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGxhcm91eF9ldmVudHMuZGVsZWdhdGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXJvdXhfZXZlbnRzLmRlbGVnYXRlcy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobGFyb3V4X2V2ZW50cy5kZWxlZ2F0ZXNbaXRlbV0uZXZlbnQgIT0gZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFyb3V4X2V2ZW50cy5kZWxlZ2F0ZXNbaXRlbV0uZm5jKGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfZXZlbnRzO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIGhlbHBlcnNcbiAgICB2YXIgbGFyb3V4X2hlbHBlcnMgPSB7XG4gICAgICAgIHVuaXF1ZUlkOiAwLFxuXG4gICAgICAgIGdldFVuaXF1ZUlkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvKmpzbGludCBwbHVzcGx1czogdHJ1ZSAqL1xuICAgICAgICAgICAgcmV0dXJuICd1aWQtJyArICgrK2xhcm91eF9oZWxwZXJzLnVuaXF1ZUlkKTtcbiAgICAgICAgfSxcblxuICAgICAgICBidWlsZFF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiAodmFsdWVzLCByZmMzOTg2KSB7XG4gICAgICAgICAgICB2YXIgdXJpID0gJycsXG4gICAgICAgICAgICAgICAgcmVnRXggPSAvJTIwL2c7XG5cbiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZXNbbmFtZV0gIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmZjMzk4NiB8fCBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJpICs9ICcmJyArIGVuY29kZVVSSUNvbXBvbmVudChuYW1lKS5yZXBsYWNlKHJlZ0V4LCAnKycpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlc1tuYW1lXS50b1N0cmluZygpKS5yZXBsYWNlKHJlZ0V4LCAnKycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJpICs9ICcmJyArIGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZXNbbmFtZV0udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB1cmkuc3Vic3RyKDEpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGJ1aWxkRm9ybURhdGE6IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZXNbbmFtZV0gIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLmFwcGVuZChuYW1lLCB2YWx1ZXNbbmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZm9ybWF0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2hpZnQuY2FsbChhcmdzKS5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIC8lcy9nLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zaGlmdC5jYWxsKGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVwbGFjZUFsbDogZnVuY3Rpb24gKHRleHQsIGRpY3Rpb25hcnkpIHtcbiAgICAgICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoT2JqZWN0LmtleXMoZGljdGlvbmFyeSkuam9pbignfCcpLCAnZycpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIHJlLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGljdGlvbmFyeVttYXRjaF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBjYW1lbENhc2U6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcblxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWx1ZS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyQ2hhciA9IHZhbHVlLmNoYXJBdChqKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VyckNoYXIgPT0gJy0nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gKCFmbGFnKSA/IGN1cnJDaGFyIDogY3VyckNoYXIudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYW50aUNhbWVsQ2FzZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsdWUubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VyckNoYXIgPSB2YWx1ZS5jaGFyQXQoaik7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJDaGFyICE9ICctJyAmJiBjdXJyQ2hhciA9PSBjdXJyQ2hhci50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSAnLScgKyBjdXJyQ2hhci50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gY3VyckNoYXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcXVvdGVBdHRyOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC8mL2csICcmYW1wOycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCAnJmFwb3M7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHJcXG4vZywgJyYjMTM7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxyXFxuXS9nLCAnJiMxMzsnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzcGxpY2VTdHJpbmc6IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGNvdW50LCBhZGQpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5zbGljZSgwLCBpbmRleCkgKyAoYWRkIHx8ICcnKSArIHZhbHVlLnNsaWNlKGluZGV4ICsgY291bnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJhbmRvbTogZnVuY3Rpb24gKG1pbiwgbWF4KSB7XG4gICAgICAgICAgICByZXR1cm4gbWluICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTtcbiAgICAgICAgfSxcblxuICAgICAgICBmaW5kOiBmdW5jdGlvbiAob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgICAgICAgb2JqLnNvbWUoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuXG4gICAgICAgIGV4dGVuZE9iamVjdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IEFycmF5LnByb3RvdHlwZS5zaGlmdC5jYWxsKGFyZ3VtZW50cyksXG4gICAgICAgICAgICAgICAgaXNBcnJheSA9IHRhcmdldCBpbnN0YW5jZW9mIEFycmF5O1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGFyZ3VtZW50cykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gYXJndW1lbnRzW2l0ZW1dKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB0YXJnZXQucHVzaChhcmd1bWVudHNbaXRlbV1bbmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgICAgICAgICAvKiB0YXJnZXRbbmFtZV0uY29uc3RydWN0b3IgPT09IE9iamVjdCAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lmhhc093blByb3BlcnR5KG5hbWUpICYmIHRhcmdldFtuYW1lXSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2hlbHBlcnMuZXh0ZW5kT2JqZWN0KHRhcmdldFtuYW1lXSwgYXJndW1lbnRzW2l0ZW1dW25hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gYXJndW1lbnRzW2l0ZW1dW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBlYWNoOiBmdW5jdGlvbiAoYXJyLCBmbmMsIHRlc3RPd25Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGFycikge1xuICAgICAgICAgICAgICAgIGlmICh0ZXN0T3duUHJvcGVydGllcyAmJiAhYXJyLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmbmMoaXRlbSwgYXJyW2l0ZW1dKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICB9LFxuXG4gICAgICAgIG1hcDogZnVuY3Rpb24gKGFyciwgZm5jLCBkb250U2tpcFJldHVybnMsIHRlc3RPd25Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGFycikge1xuICAgICAgICAgICAgICAgIGlmICh0ZXN0T3duUHJvcGVydGllcyAmJiAhYXJyLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBmbmMoYXJyW2l0ZW1dLCBpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZG9udFNraXBSZXR1cm5zIHx8IHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5kZXg6IGZ1bmN0aW9uIChhcnIsIHZhbHVlLCB0ZXN0T3duUHJvcGVydGllcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBhcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGVzdE93blByb3BlcnRpZXMgJiYgIWFyci5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYXJyW2l0ZW1dID09PSBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcblxuICAgICAgICBhZWFjaDogZnVuY3Rpb24gKGFyciwgZm5jKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gYXJyLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZuYyhpLCBhcnJbaV0pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBhcnI7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYW1hcDogZnVuY3Rpb24gKGFyciwgZm5jLCBkb250U2tpcFJldHVybnMpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBhcnIubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZm5jKGFycltpXSwgaSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRvbnRTa2lwUmV0dXJucyB8fCByZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnVuc2hpZnQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFpbmRleDogZnVuY3Rpb24gKGFyciwgdmFsdWUsIHN0YXJ0KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gKHN0YXJ0IHx8IDApLCBsZW5ndGggPSBhcnIubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfSxcblxuICAgICAgICBjb2x1bW46IGZ1bmN0aW9uIChvYmosIGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9oZWxwZXJzLm1hcChcbiAgICAgICAgICAgICAgICBvYmosXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZVtrZXldO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzaHVmZmxlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAwLFxuICAgICAgICAgICAgICAgIHNodWZmbGVkID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHJhbmQgPSBsYXJvdXhfaGVscGVycy5yYW5kb20oMCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIHNodWZmbGVkW2luZGV4KytdID0gc2h1ZmZsZWRbcmFuZF07XG4gICAgICAgICAgICAgICAgc2h1ZmZsZWRbcmFuZF0gPSBvYmpbaXRlbV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBzaHVmZmxlZDtcbiAgICAgICAgfSxcblxuICAgICAgICBtZXJnZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IEFycmF5LnByb3RvdHlwZS5zaGlmdC5jYWxsKGFyZ3VtZW50cyksXG4gICAgICAgICAgICAgICAgdG1wID0gdGFyZ2V0LFxuICAgICAgICAgICAgICAgIGlzQXJyYXkgPSB0bXAgaW5zdGFuY2VvZiBBcnJheTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBhcmd1bWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICB0bXAgPSB0bXAuY29uY2F0KGFyZ3VtZW50c1tpdGVtXSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGF0dHIgaW4gYXJndW1lbnRzW2l0ZW1dKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJndW1lbnRzW2l0ZW1dLmhhc093blByb3BlcnR5KGF0dHIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRtcFthdHRyXSA9IGFyZ3VtZW50c1tpdGVtXVthdHRyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0bXA7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZHVwbGljYXRlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcbiAgICAgICAgfSxcblxuICAgICAgICB0b0FycmF5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpdGVtcyA9IG5ldyBBcnJheShsZW5ndGgpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaXRlbXNbaV0gPSBvYmpbaV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRBc0FycmF5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXM7XG5cbiAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgIGl0ZW1zID0gb2JqO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBOb2RlTGlzdCkge1xuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBvYmoubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgaXRlbXMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zW2ldID0gb2JqW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbXMgPSBbb2JqXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldExlbmd0aDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG9iai5sZW5ndGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRLZXlzUmVjdXJzaXZlOiBmdW5jdGlvbiAob2JqLCBkZWxpbWl0ZXIsIHByZWZpeCwga2V5cykge1xuICAgICAgICAgICAgaWYgKGRlbGltaXRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gJy4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwcmVmaXggPSAnJztcbiAgICAgICAgICAgICAgICBrZXlzID0gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKHByZWZpeCArIGl0ZW0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9ialtpdGVtXSAhPT0gdW5kZWZpbmVkICYmIG9ialtpdGVtXSAhPT0gbnVsbCAmJiBvYmpbaXRlbV0uY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfaGVscGVycy5nZXRLZXlzUmVjdXJzaXZlKG9ialtpdGVtXSwgZGVsaW1pdGVyLCBwcmVmaXggKyBpdGVtICsgZGVsaW1pdGVyLCBrZXlzKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRFbGVtZW50OiBmdW5jdGlvbiAob2JqLCBwYXRoLCBkZWZhdWx0VmFsdWUsIGRlbGltaXRlcikge1xuICAgICAgICAgICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRlbGltaXRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gJy4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcG9zID0gcGF0aC5pbmRleE9mKGRlbGltaXRlcik7XG4gICAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgICAgdmFyIHJlc3Q7XG4gICAgICAgICAgICBpZiAocG9zID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGtleSA9IHBhdGg7XG4gICAgICAgICAgICAgICAgcmVzdCA9IG51bGw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGtleSA9IHBhdGguc3Vic3RyaW5nKDAsIHBvcyk7XG4gICAgICAgICAgICAgICAgcmVzdCA9IHBhdGguc3Vic3RyaW5nKHBvcyArIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gb2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZXN0ID09PSBudWxsIHx8IHJlc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2hlbHBlcnMuZ2V0RWxlbWVudChvYmpba2V5XSwgcmVzdCwgZGVmYXVsdFZhbHVlLCBkZWxpbWl0ZXIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfaGVscGVycztcblxufSgpKTtcbiIsIi8qanNsaW50IG5vbWVuOiB0cnVlICovXG5tb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gc3RhY2tcbiAgICB2YXIgbGFyb3V4X3N0YWNrID0gZnVuY3Rpb24gKGRhdGEsIGRlcHRoLCB0b3ApIHtcbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIGxhcm91eF9zdGFjaykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcyhkYXRhLCBkZXB0aCwgdG9wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2RhdGEgPSB7fTtcbiAgICAgICAgdGhpcy5fZGVwdGggPSBkZXB0aDtcbiAgICAgICAgdGhpcy5fdG9wID0gdG9wIHx8IHRoaXM7XG5cbiAgICAgICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgLy8gZGVsZXRlIHRoaXMuX2RhdGFba2V5XTtcblxuICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSB2YWx1ZTtcblxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YVtrZXldKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGF0YVtrZXldID0gbmV3IGxhcm91eF9zdGFjayhcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVwdGggP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RlcHRoICsgJy4nICsga2V5IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90b3BcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSB2YWx1ZTtcblxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy5fZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kYXRhW2tleV0gPT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNldCh0aGlzLCBrZXksIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90b3Aub251cGRhdGUoeyBzY29wZTogdGhpcywga2V5OiBrZXksIG9sZFZhbHVlOiBvbGRWYWx1ZSwgbmV3VmFsdWU6IG5ld1ZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNldFJhbmdlID0gZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICAgICAgZm9yICh2YXIgdmFsdWVLZXkgaW4gdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZXMuaGFzT3duUHJvcGVydHkodmFsdWVLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KHZhbHVlS2V5LCB2YWx1ZXNbdmFsdWVLZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChrZXksIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNba2V5XSB8fCBkZWZhdWx0VmFsdWUgfHwgbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldFJhbmdlID0gZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSB7fTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBrZXlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFrZXlzLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhbHVlc1trZXlzW2l0ZW1dXSA9IHRoaXNba2V5c1tpdGVtXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5rZXlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX2RhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX2RhdGEpLmxlbmd0aDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmV4aXN0cyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiAoa2V5IGluIHRoaXMuX2RhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgaWYgKGtleSBpbiB0aGlzLl9kYXRhKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXNba2V5XTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fZGF0YVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIHRoaXMuX2RhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2RhdGEuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXNbaXRlbV07XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2RhdGFbaXRlbV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2RhdGEgPSB7fTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9udXBkYXRlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UmFuZ2UoZGF0YSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9zdGFjaztcblxufSgpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyB0aW1lcnNcbiAgICB2YXIgbGFyb3V4X3RpbWVycyA9IHtcbiAgICAgICAgZGF0YTogW10sXG5cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodGltZXIpIHtcbiAgICAgICAgICAgIHRpbWVyLm5leHQgPSBEYXRlLm5vdygpICsgdGltZXIudGltZW91dDtcbiAgICAgICAgICAgIGxhcm91eF90aW1lcnMuZGF0YS5wdXNoKHRpbWVyKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldEtleSA9IG51bGw7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gbGFyb3V4X3RpbWVycy5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXJvdXhfdGltZXJzLmRhdGEuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJdGVtID0gbGFyb3V4X3RpbWVycy5kYXRhW2l0ZW1dO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJdGVtLmlkICE9PSB1bmRlZmluZWQgJiYgY3VycmVudEl0ZW0uaWQgPT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0S2V5ID0gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGFyZ2V0S2V5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X3RpbWVycy5kYXRhLnNwbGljZSh0YXJnZXRLZXksIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb250aWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgICAgICAgICAgdmFyIHJlbW92ZUtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gbGFyb3V4X3RpbWVycy5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXJvdXhfdGltZXJzLmRhdGEuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJdGVtID0gbGFyb3V4X3RpbWVycy5kYXRhW2l0ZW1dO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJdGVtLm5leHQgPD0gbm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBjdXJyZW50SXRlbS5vbnRpY2soY3VycmVudEl0ZW0uc3RhdGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IGZhbHNlICYmIGN1cnJlbnRJdGVtLnJlc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5uZXh0ID0gbm93ICsgY3VycmVudEl0ZW0udGltZW91dDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUtleXMudW5zaGlmdChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbTIgaW4gcmVtb3ZlS2V5cykge1xuICAgICAgICAgICAgICAgIGlmICghcmVtb3ZlS2V5cy5oYXNPd25Qcm9wZXJ0eShpdGVtMikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFyb3V4X3RpbWVycy5kYXRhLnNwbGljZShyZW1vdmVLZXlzW2l0ZW0yXSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF90aW1lcnM7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpO1xuXG4gICAgLy8gdHJpZ2dlcnNcbiAgICB2YXIgbGFyb3V4X3RyaWdnZXJzID0ge1xuICAgICAgICBkZWxlZ2F0ZXM6IFtdLFxuICAgICAgICBsaXN0OiBbXSxcblxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjb25kaXRpb24sIGZuYywgc3RhdGUpIHtcbiAgICAgICAgICAgIHZhciBjb25kaXRpb25zID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShjb25kaXRpb24pO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGNvbmRpdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbmRpdGlvbnMuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxhcm91eF9oZWxwZXJzLmFpbmRleChsYXJvdXhfdHJpZ2dlcnMubGlzdCwgY29uZGl0aW9uc1tpdGVtXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF90cmlnZ2Vycy5saXN0LnB1c2goY29uZGl0aW9uc1tpdGVtXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXJvdXhfdHJpZ2dlcnMuZGVsZWdhdGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGNvbmRpdGlvbnM6IGNvbmRpdGlvbnMsXG4gICAgICAgICAgICAgICAgZm5jOiBmbmMsXG4gICAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbnRyaWdnZXI6IGZ1bmN0aW9uICh0cmlnZ2VyTmFtZSwgYXJncykge1xuICAgICAgICAgICAgdmFyIGV2ZW50SWR4ID0gbGFyb3V4X2hlbHBlcnMuYWluZGV4KGxhcm91eF90cmlnZ2Vycy5saXN0LCB0cmlnZ2VyTmFtZSk7XG4gICAgICAgICAgICBpZiAoZXZlbnRJZHggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X3RyaWdnZXJzLmxpc3Quc3BsaWNlKGV2ZW50SWR4LCAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJlbW92ZUtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gbGFyb3V4X3RyaWdnZXJzLmRlbGVnYXRlcykge1xuICAgICAgICAgICAgICAgIGlmICghbGFyb3V4X3RyaWdnZXJzLmRlbGVnYXRlcy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SXRlbSA9IGxhcm91eF90cmlnZ2Vycy5kZWxlZ2F0ZXNbaXRlbV07XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjb25kaXRpb25LZXkgaW4gY3VycmVudEl0ZW0uY29uZGl0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRJdGVtLmNvbmRpdGlvbnMuaGFzT3duUHJvcGVydHkoY29uZGl0aW9uS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uT2JqID0gY3VycmVudEl0ZW0uY29uZGl0aW9uc1tjb25kaXRpb25LZXldO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfaGVscGVycy5haW5kZXgobGFyb3V4X3RyaWdnZXJzLmxpc3QsIGNvbmRpdGlvbk9iaikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW0uZm5jKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBjdXJyZW50SXRlbS5zdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBsYXJvdXhfaGVscGVycy5nZXRBc0FycmF5KGFyZ3MpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUtleXMudW5zaGlmdChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0yIGluIHJlbW92ZUtleXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlbW92ZUtleXMuaGFzT3duUHJvcGVydHkoaXRlbTIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhcm91eF90cmlnZ2Vycy5kZWxlZ2F0ZXMuc3BsaWNlKHJlbW92ZUtleXNbaXRlbTJdLCAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyaWdnZXIgbmFtZTogJyArIHRyaWdnZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X3RyaWdnZXJzO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIHZhcnNcbiAgICB2YXIgbGFyb3V4X3ZhcnMgPSB7XG4gICAgICAgIGNvb2tpZVBhdGg6ICcvJyxcblxuICAgICAgICBnZXRDb29raWU6IGZ1bmN0aW9uIChuYW1lLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJz1bXjtdKycsICdpJyksXG4gICAgICAgICAgICAgICAgbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2gocmUpO1xuXG4gICAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZSB8fCBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzBdLnNwbGl0KCc9JylbMV0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldENvb2tpZTogZnVuY3Rpb24gKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoKSB7XG4gICAgICAgICAgICB2YXIgZXhwaXJlVmFsdWUgPSAnJztcbiAgICAgICAgICAgIGlmIChleHBpcmVzKSB7XG4gICAgICAgICAgICAgICAgZXhwaXJlVmFsdWUgPSAnOyBleHBpcmVzPScgKyBleHBpcmVzLnRvR01UU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgKyBleHBpcmVWYWx1ZSArICc7IHBhdGg9JyArIChwYXRoIHx8IGxhcm91eF92YXJzLmNvb2tpZVBhdGgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZUNvb2tpZTogZnVuY3Rpb24gKG5hbWUsIHBhdGgpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICc9OyBleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UOyBwYXRoPScgKyAocGF0aCB8fCBsYXJvdXhfdmFycy5jb29raWVQYXRoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRMb2NhbDogZnVuY3Rpb24gKG5hbWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKCEobmFtZSBpbiBsb2NhbFN0b3JhZ2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZSB8fCBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbbmFtZV0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldExvY2FsOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVtuYW1lXSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmVMb2NhbDogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbbmFtZV07XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0U2Vzc2lvbjogZnVuY3Rpb24gKG5hbWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKCEobmFtZSBpbiBzZXNzaW9uU3RvcmFnZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlIHx8IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlW25hbWVdKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRTZXNzaW9uOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlW25hbWVdID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZVNlc3Npb246IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBkZWxldGUgc2Vzc2lvblN0b3JhZ2VbbmFtZV07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF92YXJzO1xuXG59KCkpO1xuIl19\n","module.exports = (function () {\n    'use strict';\n\n    // date\n    var laroux_date = {\n        shortDateFormat: 'dd.MM.yyyy',\n        longDateFormat: 'dd MMMM yyyy',\n        timeFormat: 'HH:mm',\n\n        monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        monthsLong: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n\n        strings: {\n            now:     'now',\n            later:   'later',\n            ago:     'ago',\n            seconds: 'seconds',\n            aminute: 'a minute',\n            minutes: 'minutes',\n            ahour:   'a hour',\n            hours:   'hours',\n            aday:    'a day',\n            days:    'days',\n            aweek:   'a week',\n            weeks:   'weeks',\n            amonth:  'a month',\n            months:  'months',\n            ayear:   'a year',\n            years:   'years'\n        },\n\n        parseEpoch: function (timespan, limitWithWeeks) {\n            if (timespan < 60 * 1000) {\n                timespan = Math.ceil(timespan / 1000);\n\n                return timespan + ' ' + laroux_date.strings.seconds;\n            }\n\n            if (timespan < 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aminute;\n                }\n\n                return timespan + ' ' + laroux_date.strings.minutes;\n            }\n\n            if (timespan < 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.ahour;\n                }\n\n                return timespan + ' ' + laroux_date.strings.hours;\n            }\n\n            if (timespan < 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aday;\n                }\n\n                return timespan + ' ' + laroux_date.strings.days;\n            }\n\n            if (timespan < 4 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (7 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aweek;\n                }\n\n                return timespan + ' ' + laroux_date.strings.weeks;\n            }\n\n            if (limitWithWeeks === true) {\n                return null;\n            }\n\n            if (timespan < 30 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (30 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.amonth;\n                }\n\n                return timespan + ' ' + laroux_date.strings.months;\n            }\n\n            timespan = Math.ceil(timespan / (365 * 24 * 60 * 60 * 1000));\n\n            if (timespan === 1) {\n                return laroux_date.strings.ayear;\n            }\n\n            return timespan + ' ' + laroux_date.strings.years;\n        },\n\n        getCustomDateString: function (format, date) {\n            var now = date || new Date();\n\n            return format.replace(\n                /yyyy|yy|MMMM|MMM|MM|M|dd|d|hh|h|HH|H|mm|m|ss|s|tt|t/g,\n                function (match) {\n                    switch (match) {\n                    case 'yyyy':\n                        return now.getFullYear();\n\n                    case 'yy':\n                        return now.getYear();\n\n                    case 'MMMM':\n                        return laroux_date.monthsLong[now.getMonth()];\n\n                    case 'MMM':\n                        return laroux_date.monthsShort[now.getMonth()];\n\n                    case 'MM':\n                        return ('0' + (now.getMonth() + 1)).substr(-2, 2);\n\n                    case 'M':\n                        return now.getMonth() + 1;\n\n                    case 'dd':\n                        return ('0' + now.getDate()).substr(-2, 2);\n\n                    case 'd':\n                        return now.getDate();\n\n                    case 'hh':\n                        var hour1 = now.getHours();\n                        return ('0' + (((hour1 % 12) > 0) ? hour1 % 12 : 12)).substr(-2, 2);\n\n                    case 'h':\n                        var hour2 = now.getHours();\n                        return ((hour2 % 12) > 0) ? hour2 % 12 : 12;\n\n                    case 'HH':\n                        return ('0' + now.getHours()).substr(-2, 2);\n\n                    case 'H':\n                        return now.getHours();\n\n                    case 'mm':\n                        return ('0' + now.getMinutes()).substr(-2, 2);\n\n                    case 'm':\n                        return now.getMinutes();\n\n                    case 'ss':\n                        return ('0' + now.getSeconds()).substr(-2, 2);\n\n                    case 's':\n                        return now.getSeconds();\n\n                    case 'tt':\n                        if (now.getHours() >= 12) {\n                            return 'pm';\n                        }\n\n                        return 'am';\n\n                    case 't':\n                        if (now.getHours() >= 12) {\n                            return 'p';\n                        }\n\n                        return 'a';\n                    }\n\n                    return match;\n                }\n            );\n        },\n\n        getDateDiffString: function (date) {\n            var now = Date.now(),\n                timespan = now - date.getTime(),\n                absTimespan = Math.abs(timespan),\n                past = (timespan > 0);\n\n            if (absTimespan <= 3000) {\n                return laroux_date.strings.now;\n            }\n\n            var timespanstring = laroux_date.parseEpoch(absTimespan, true);\n            if (timespanstring !== null) {\n                return timespanstring +\n                    ' ' +\n                    (past ? laroux_date.strings.ago : laroux_date.strings.later);\n            }\n\n            return laroux_date.getShortDateString(date, true);\n        },\n\n        getShortDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.shortDateFormat + ' ' + laroux_date.timeFormat : laroux_date.shortDateFormat,\n                date\n            );\n        },\n\n        getLongDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.longDateFormat + ' ' + laroux_date.timeFormat : laroux_date.longDateFormat,\n                date\n            );\n        }\n    };\n\n    return laroux_date;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // events\n    var laroux_events = {\n        delegates: [],\n\n        add: function (event, fnc) {\n            laroux_events.delegates.push({ event: event, fnc: fnc });\n        },\n\n        invoke: function (event, args) {\n            for (var item in laroux_events.delegates) {\n                if (!laroux_events.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_events.delegates[item].event != event) {\n                    continue;\n                }\n\n                laroux_events.delegates[item].fnc(args);\n            }\n        }\n    };\n\n    return laroux_events;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // helpers\n    var laroux_helpers = {\n        uniqueId: 0,\n\n        getUniqueId: function () {\n            /*jslint plusplus: true */\n            return 'uid-' + (++laroux_helpers.uniqueId);\n        },\n\n        buildQueryString: function (values, rfc3986) {\n            var uri = '',\n                regEx = /%20/g;\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    if (rfc3986 || false) {\n                        uri += '&' + encodeURIComponent(name).replace(regEx, '+') + '=' + encodeURIComponent(values[name].toString()).replace(regEx, '+');\n                    } else {\n                        uri += '&' + encodeURIComponent(name) + '=' + encodeURIComponent(values[name].toString());\n                    }\n                }\n            }\n\n            return uri.substr(1);\n        },\n\n        buildFormData: function (values) {\n            var data = new FormData();\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    data.append(name, values[name]);\n                }\n            }\n\n            return data;\n        },\n\n        format: function () {\n            var args = arguments;\n            return Array.prototype.shift.call(args).replace(\n                /%s/g,\n                function () {\n                    return Array.prototype.shift.call(args);\n                }\n            );\n        },\n\n        replaceAll: function (text, dictionary) {\n            var re = new RegExp(Object.keys(dictionary).join('|'), 'g');\n\n            return text.replace(\n                re,\n                function (match) {\n                    return dictionary[match];\n                }\n            );\n        },\n\n        camelCase: function (value) {\n            var flag = false;\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar == '-') {\n                    flag = true;\n                    continue;\n                }\n\n                output += (!flag) ? currChar : currChar.toUpperCase();\n                flag = false;\n            }\n\n            return output;\n        },\n\n        antiCamelCase: function (value) {\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar != '-' && currChar == currChar.toUpperCase()) {\n                    output += '-' + currChar.toLowerCase();\n                    continue;\n                }\n\n                output += currChar;\n            }\n\n            return output;\n        },\n\n        quoteAttr: function (value) {\n            return value.replace(/&/g, '&amp;')\n                        .replace(/'/g, '&apos;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/</g, '&lt;')\n                        .replace(/>/g, '&gt;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/\\r\\n/g, '&#13;')\n                        .replace(/[\\r\\n]/g, '&#13;');\n        },\n\n        spliceString: function (value, index, count, add) {\n            return value.slice(0, index) + (add || '') + value.slice(index + count);\n        },\n\n        random: function (min, max) {\n            return min + Math.floor(Math.random() * (max - min + 1));\n        },\n\n        find: function (obj, iterator, context) {\n            var result;\n\n            obj.some(function (value, index, list) {\n                if (iterator.call(context, value, index, list)) {\n                    result = value;\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        extendObject: function () {\n            var target = Array.prototype.shift.call(arguments),\n                isArray = target instanceof Array;\n\n            for (var item in arguments) {\n                for (var name in arguments[item]) {\n                    // if (isArray) {\n                    //     target.push(arguments[item][name]);\n                    //     continue;\n                    // }\n\n                    /* target[name].constructor === Object */\n                    if (target.hasOwnProperty(name) && target[name] instanceof Object) {\n                        laroux_helpers.extendObject(target[name], arguments[item][name]);\n                        continue;\n                    }\n\n                    target[name] = arguments[item][name];\n                }\n            }\n        },\n\n        each: function (arr, fnc, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (fnc(item, arr[item]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        map: function (arr, fnc, dontSkipReturns, testOwnProperties) {\n            var results = [];\n\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var result = fnc(arr[item], item);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.push(result);\n                }\n            }\n\n            return results;\n        },\n\n        index: function (arr, value, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (arr[item] === object) {\n                    return item;\n                }\n            }\n\n            return null;\n        },\n\n        aeach: function (arr, fnc) {\n            for (var i = 0, length = arr.length; i < length; i++) {\n                if (fnc(i, arr[i]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        amap: function (arr, fnc, dontSkipReturns) {\n            var results = [];\n\n            for (var i = 0, length = arr.length; i < length; i++) {\n                var result = fnc(arr[i], i);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.unshift(result);\n                }\n            }\n\n            return results;\n        },\n\n        aindex: function (arr, value, start) {\n            for (var i = (start || 0), length = arr.length; i < length; i++) {\n                if (arr[i] === value) {\n                    return i;\n                }\n            }\n\n            return -1;\n        },\n\n        column: function (obj, key) {\n            return laroux_helpers.map(\n                obj,\n                function (value) {\n                    return value[key];\n                },\n                true\n            );\n        },\n\n        shuffle: function (obj) {\n            var index = 0,\n                shuffled = [];\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var rand = laroux_helpers.random(0, index);\n                shuffled[index++] = shuffled[rand];\n                shuffled[rand] = obj[item];\n            }\n\n            return shuffled;\n        },\n\n        merge: function () {\n            var target = Array.prototype.shift.call(arguments),\n                tmp = target,\n                isArray = tmp instanceof Array;\n\n            for (var item in arguments) {\n                if (isArray) {\n                    tmp = tmp.concat(arguments[item]);\n                    continue;\n                }\n\n                for (var attr in arguments[item]) {\n                    if (!arguments[item].hasOwnProperty(attr)) {\n                        continue;\n                    }\n\n                    tmp[attr] = arguments[item][attr];\n                }\n            }\n\n            return tmp;\n        },\n\n        duplicate: function (obj) {\n            return JSON.parse(JSON.stringify(obj));\n        },\n\n        toArray: function (obj) {\n            var length = obj.length,\n                items = new Array(length);\n\n            for (var i = 0; i < length; i++) {\n                items[i] = obj[i];\n            }\n\n            return items;\n        },\n\n        getAsArray: function (obj) {\n            var items;\n\n            if (obj instanceof Array) {\n                items = obj;\n            } else if (obj instanceof NodeList) {\n                var length = obj.length;\n\n                items = new Array(length);\n                for (var i = 0; i < length; i++) {\n                    items[i] = obj[i];\n                }\n            } else {\n                items = [obj];\n            }\n\n            return items;\n        },\n\n        getLength: function (obj) {\n            if (obj.constructor === Object) {\n                if (obj.length !== undefined) {\n                    return obj.length;\n                }\n\n                return Object.keys(obj).length;\n            }\n\n            return -1;\n        },\n\n        getKeysRecursive: function (obj, delimiter, prefix, keys) {\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            if (prefix === undefined) {\n                prefix = '';\n                keys = [];\n            }\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                keys.push(prefix + item);\n\n                if (obj[item] !== undefined && obj[item] !== null && obj[item].constructor === Object) {\n                    laroux_helpers.getKeysRecursive(obj[item], delimiter, prefix + item + delimiter, keys);\n                    continue;\n                }\n            }\n\n            return keys;\n        },\n\n        getElement: function (obj, path, defaultValue, delimiter) {\n            if (defaultValue === undefined) {\n                defaultValue = null;\n            }\n\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            var pos = path.indexOf(delimiter);\n            var key;\n            var rest;\n            if (pos === -1) {\n                key = path;\n                rest = null;\n            } else {\n                key = path.substring(0, pos);\n                rest = path.substring(pos + 1);\n            }\n\n            if (!(key in obj)) {\n                return defaultValue;\n            }\n\n            if (rest === null || rest.length === 0) {\n                return obj[key];\n            }\n\n            return laroux_helpers.getElement(obj[key], rest, defaultValue, delimiter);\n        }\n    };\n\n    return laroux_helpers;\n\n}());\n","/*jslint nomen: true */\nmodule.exports = (function () {\n    'use strict';\n\n    // stack\n    var laroux_stack = function (data, depth, top) {\n        if (!(this instanceof laroux_stack)) {\n            return new this(data, depth, top);\n        }\n\n        this._data = {};\n        this._depth = depth;\n        this._top = top || this;\n\n        this.set = function (key, value) {\n            // delete this._data[key];\n\n            var type = typeof value;\n            switch (type) {\n            case 'function':\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key]();\n                        }\n                    }\n                );\n                break;\n\n            default:\n                /*\n                if (type == 'object') {\n                    this._data[key] = new laroux_stack(\n                        value,\n                        this._depth ?\n                            this._depth + '.' + key :\n                            key,\n                        this._top\n                    );\n                } else {\n                    this._data[key] = value;\n                }\n                */\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key];\n                        },\n                        set: function (newValue) {\n                            var oldValue = this._data[key];\n                            if (this._data[key] === newValue) {\n                                return;\n                            }\n\n                            // this.set(this, key, newValue);\n                            this._data[key] = newValue;\n                            this._top.onupdate({ scope: this, key: key, oldValue: oldValue, newValue: newValue });\n                        }\n                    }\n                );\n                break;\n            }\n        };\n\n        this.setRange = function (values) {\n            for (var valueKey in values) {\n                if (!values.hasOwnProperty(valueKey)) {\n                    continue;\n                }\n\n                this.set(valueKey, values[valueKey]);\n            }\n        };\n\n        this.get = function (key, defaultValue) {\n            return this[key] || defaultValue || null;\n        };\n\n        this.getRange = function (keys) {\n            var values = {};\n\n            for (var item in keys) {\n                if (!keys.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                values[keys[item]] = this[keys[item]];\n            }\n\n            return values;\n        };\n\n        this.keys = function () {\n            return Object.keys(this._data);\n        };\n\n        this.length = function () {\n            return Object.keys(this._data).length;\n        };\n\n        this.exists = function (key) {\n            return (key in this._data);\n        };\n\n        this.remove = function (key) {\n            if (key in this._data) {\n                delete this[key];\n                delete this._data[key];\n            }\n        };\n\n        this.clear = function () {\n            for (var item in this._data) {\n                if (!this._data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                delete this[item];\n                delete this._data[item];\n            }\n\n            this._data = {};\n        };\n\n        this.onupdate = function (event) {\n        };\n\n        if (data) {\n            this.setRange(data);\n        }\n    };\n\n    return laroux_stack;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // timers\n    var laroux_timers = {\n        data: [],\n\n        set: function (timer) {\n            timer.next = Date.now() + timer.timeout;\n            laroux_timers.data.push(timer);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux_timers.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        ontick: function () {\n            var now = Date.now();\n\n            var removeKeys = [];\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.next <= now) {\n                    var result = currentItem.ontick(currentItem.state);\n\n                    if (result !== false && currentItem.reset) {\n                        currentItem.next = now + currentItem.timeout;\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_timers.data.splice(removeKeys[item2], 1);\n            }\n        }\n    };\n\n    return laroux_timers;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n\n    // triggers\n    var laroux_triggers = {\n        delegates: [],\n        list: [],\n\n        set: function (condition, fnc, state) {\n            var conditions = laroux_helpers.getAsArray(condition);\n\n            for (var item in conditions) {\n                if (!conditions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_helpers.aindex(laroux_triggers.list, conditions[item]) === -1) {\n                    laroux_triggers.list.push(conditions[item]);\n                }\n            }\n\n            laroux_triggers.delegates.push({\n                conditions: conditions,\n                fnc: fnc,\n                state: state\n            });\n        },\n\n        ontrigger: function (triggerName, args) {\n            var eventIdx = laroux_helpers.aindex(laroux_triggers.list, triggerName);\n            if (eventIdx !== -1) {\n                laroux_triggers.list.splice(eventIdx, 1);\n            }\n\n            var removeKeys = [];\n            for (var item in laroux_triggers.delegates) {\n                if (!laroux_triggers.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var count = 0;\n                var currentItem = laroux_triggers.delegates[item];\n\n                for (var conditionKey in currentItem.conditions) {\n                    if (!currentItem.conditions.hasOwnProperty(conditionKey)) {\n                        continue;\n                    }\n\n                    var conditionObj = currentItem.conditions[conditionKey];\n\n                    if (laroux_helpers.aindex(laroux_triggers.list, conditionObj) !== -1) {\n                        count++;\n                        // break;\n                    }\n                }\n\n                if (count === 0) {\n                    currentItem.fnc(\n                        {\n                            state: currentItem.state,\n                            args: laroux_helpers.getAsArray(args)\n                        }\n                    );\n                    removeKeys.unshift(item);\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_triggers.delegates.splice(removeKeys[item2], 1);\n            }\n\n            // console.log('trigger name: ' + triggerName);\n        }\n    };\n\n    return laroux_triggers;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // vars\n    var laroux_vars = {\n        cookiePath: '/',\n\n        getCookie: function (name, defaultValue) {\n            var re = new RegExp(encodeURIComponent(name) + '=[^;]+', 'i'),\n                match = document.cookie.match(re);\n\n            if (!match) {\n                return defaultValue || null;\n            }\n\n            return decodeURIComponent(match[0].split('=')[1]);\n        },\n\n        setCookie: function (name, value, expires, path) {\n            var expireValue = '';\n            if (expires) {\n                expireValue = '; expires=' + expires.toGMTString();\n            }\n\n            document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value) + expireValue + '; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        removeCookie: function (name, path) {\n            document.cookie = encodeURIComponent(name) + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        getLocal: function (name, defaultValue) {\n            if (!(name in localStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(localStorage[name]);\n        },\n\n        setLocal: function (name, value) {\n            localStorage[name] = JSON.stringify(value);\n        },\n\n        removeLocal: function (name) {\n            delete localStorage[name];\n        },\n\n        getSession: function (name, defaultValue) {\n            if (!(name in sessionStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(sessionStorage[name]);\n        },\n\n        setSession: function (name, value) {\n            sessionStorage[name] = JSON.stringify(value);\n        },\n\n        removeSession: function (name) {\n            delete sessionStorage[name];\n        }\n    };\n\n    return laroux_vars;\n\n}());\n"],"sourceRoot":"/source/"}